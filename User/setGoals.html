<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set Goals - OptiLife</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <style>
        :root {
            /* Base Theme Colors (Consistent with Progress.html) */
            --bg-color: #000;
            --snd-bf-color: #111;
            --text-color: #ffffff;
            --main-color: #FFD700;
            --color-black: #0a0a0a;
            --color-dark-gray: #1a1a1a;
            --color-gold: #daa520;
            --color-gold-light: #f0c44c;
            --color-text-muted: #aaaaaa;
            --border-color-light: #333;
            --header-height-desktop: 100px;
            --header-height-mobile: 80px;
            --font-primary: 'Poppins', sans-serif;

            /* Theme Variables (Consistent with Progress.html & SetGoals) */
            --card-bg: var(--color-dark-gray);
            --card-text-color: var(--text-color);
            --card-muted-text-color: var(--color-text-muted);
            --card-border-color: var(--border-color-light);
            --card-accent-color: var(--main-color);

            --grid-gap: 1.5rem;
            --content-padding: 1.5rem;

            --button-primary-bg: var(--main-color);
            --button-primary-text: var(--color-black);
            --button-primary-hover-bg: var(--color-gold-light);
            --button-secondary-bg: #555;
            --button-secondary-text: var(--text-color);
            --button-secondary-hover-bg: #666;

            --modal-overlay-bg: rgba(0, 0, 0, 0.7);
            --modal-bg: var(--color-dark-gray); /* Default modal bg */
            --modal-text-color: var(--text-color); /* Default modal text */

            --input-bg: #252525;
            --input-border-color: var(--border-color-light);
            --input-text-color: var(--text-color);
            --input-focus-border-color: var(--main-color);
            --input-focus-shadow: rgba(255, 215, 0, 0.3);

            --tab-inactive-bg: #333;
            --tab-inactive-text: var(--card-muted-text-color);
            --tab-hover-bg: #444;
            --tab-hover-text: var(--card-text-color);
            --stat-card-sub-decrease: #f44336;
            --error-color: #f44336; /* For modal validation */
            --modal-bg-dark: var(--modal-bg); /* Alias for consistency if needed */
            --modal-text-dark: var(--modal-text-color); /* Alias */
            --input-bg-dark: var(--input-bg); /* Alias */
        }

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          text-decoration: none;
          list-style: none;
          border: none;
          outline: none;
        }

        html {
            font-size: 62.5%; /* 1rem = 10px */
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-primary);
            font-size: 1.6rem; /* Base font size: 16px */
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* === HEADER STYLES (FROM progress.html) === */
        header {
            position: fixed;
            width: 100%;
            height: var(--header-height-desktop);
            top: 0;
            left: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 9%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            transition: background 0.5s ease, backdrop-filter 0.5s ease, height 0.3s ease, padding 0.3s ease;
            box-sizing: border-box;
            border-bottom: 1px solid var(--border-color-light);
        }

        .logo {
            cursor: pointer;
            transition: 0.3s ease-in-out;
            flex-shrink: 0;
            display: flex;
            align-items: center;
        }

        .logo img {
            max-width: 100px;
            height: auto;
            transition: max-width 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            list-style: none;
            padding: 0;
            margin: 0;
            flex-grow: 1;
            margin-left: 4rem;
            transition: left 0.3s ease-in-out, right 0.5s ease;
        }

        .navbar-left,
        .navbar-right {
            display: flex;
            align-items: center;
            padding: 0;
            margin: 0;
        }
        .navbar-right {
            gap: 2rem;
        }

        .navbar li {
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
        }

        .navbar a {
            font-size: 1.8rem;
            font-weight: 500;
            color: var(--text-color);
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            padding: 0.5rem 0;
        }

        .navbar-left li a {
            margin-left: 4rem;
        }
        .navbar-left li:first-child a {
            margin-left: 0;
        }

        .navbar-right .profile-menu-container {
            position: relative;
        }

        .welcome-text {
            font-size: 1.6rem;
            color: var(--color-text-muted);
            white-space: nowrap;
        }
        .welcome-text span#header-user-name {
            font-weight: 500;
            color: var(--text-color);
        }

        .navbar-right li a#logout-link {
            margin-left: 0;
            display: flex;
            align-items: center;
            gap: 0.6rem;
            border-bottom: none;
            padding: 0.5rem 0.8rem;
            border-radius: 4px;
        }
        .navbar-right li a#logout-link i {
            font-size: 2rem;
            line-height: 1;
            transition: color 0.3s ease;
        }

        .navbar a:hover,
        .navbar a.active {
            color: var(--main-color);
            border-bottom-color: var(--main-color);
        }

        .navbar-right li a#logout-link:hover {
            color: var(--main-color);
            border-bottom-color: transparent;
            background-color: rgba(255, 215, 0, 0.1);
        }
        .navbar-right li a#logout-link:hover i {
            color: var(--main-color);
        }


        .navbar .profile-pic {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            display: block;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, width 0.3s ease, height 0.3s ease;
            border: 2px solid transparent;
        }
        .navbar .profile-pic:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(var(--main-color), 0.5);
        }
         .navbar .profile-pic.active {
             border-color: var(--main-color);
             box-shadow: 0 0 10px rgba(var(--main-color), 0.5);
         }

        #menu-icon {
            font-size: 4.5rem;
            color: var(--main-color);
            cursor: pointer;
            display: none;
            margin-left: 2rem;
            z-index: 1001;
        }

         .profile-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 10px;
            background-color: var(--snd-bf-color);
            border: 1px solid var(--border-color-light);
            border-radius: 6px;
            min-width: 180px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1100;
            padding: 0.5rem 0;
            list-style: none;
            animation: fadeInDropdown 0.2s ease-out;
        }
        .profile-dropdown.active { display: block; }
        @keyframes fadeInDropdown { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        .profile-dropdown li a.dropdown-item {
            display: flex;
            align-items: center;
            padding: 0.8rem 1.5rem;
            font-size: 1.4rem;
            color: var(--text-color);
            font-weight: 400;
            white-space: nowrap;
            transition: background-color 0.2s ease, color 0.2s ease;
            border-bottom: none;
        }
        .profile-dropdown li a.dropdown-item:hover {
            background-color: var(--color-dark-gray);
            color: var(--main-color);
             border-bottom-color: transparent; /* Ensure hover doesn't add underline */
        }
        .profile-dropdown li a.dropdown-item i {
            margin-right: 0.8rem;
            font-size: 1.6rem;
            vertical-align: middle;
            position: relative;
            top: -1px;
            color: var(--color-text-muted);
            transition: color 0.2s ease;
        }
        .profile-dropdown li a.dropdown-item:hover i {
            color: var(--main-color);
        }
        /* === END OF HEADER STYLES === */

        /* === MAIN CONTENT & CARD STYLES (Adapted from SetGoals & Progress) === */
        main.content-grid {
            padding-top: calc(var(--header-height-desktop, 100px) + 2rem);
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: var(--grid-gap);
            padding-left: var(--content-padding);
            padding-right: var(--content-padding);
            padding-bottom: var(--content-padding);
            color: var(--card-text-color);
            flex-grow: 1;
        }

        .card {
            background-color: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--card-border-color);
            color: var(--card-text-color);
        }

        /* === SIDEBAR (Calendar Widget Area Styling) === */
        .calendar-widget {
             border: 2px solid var(--card-accent-color);
        }
        .calendar-widget h2 {
             color: var(--card-accent-color) !important;
             font-size: 1.7rem;
             margin-bottom: 1rem;
        }
        .calendar-widget .input-block label {
            color: var(--card-accent-color) !important;
            font-size: 1.3rem;
            display: block;
            margin-bottom: 0.5rem;
        }
        .calendar-widget .calendar-header { /* Re-using calendar header class for title */
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 1rem; font-weight: 500;
            color: var(--card-text-color);
            font-size: 1.4rem;
        }
        .calendar-widget .input-block { margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--card-border-color); }
        .calendar-widget .input-block:last-child { border-bottom: none; padding-bottom: 0; margin-bottom: 0; }
        .calendar-widget .info-input,
        .calendar-widget .input-group input[type="text"],
        .calendar-widget .input-group input[type="number"],
        .calendar-widget .input-group select {
            background-color: var(--input-bg);
            border: 1px solid var(--input-border-color);
            color: var(--input-text-color);
            font-size: 1.25rem;
            padding: 0.8rem 1rem; width: 100%; border-radius: 4px;
        }
        .calendar-widget .info-input:focus,
        .calendar-widget .input-group input[type="text"]:focus,
        .calendar-widget .input-group input[type="number"]:focus,
        .calendar-widget .input-group select:focus {
            outline: none; border-color: var(--input-focus-border-color);
            box-shadow: 0 0 0 2px var(--input-focus-shadow);
        }
        .calendar-widget .info-input[type="select"], .calendar-widget select {
             background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23aaaaaa' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
             background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 16px 12px;
             appearance: none; -webkit-appearance: none; -moz-appearance: none;
        }

        /* === MAIN TAB CONTENT AREA STYLES === */
        .main-tab-content {
            border: 2px solid var(--card-accent-color);
            border-radius: 8px;
            background-color: var(--card-bg);
            color: var(--card-text-color);
            min-width: 0;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .content-placeholder { padding: 1.5rem; background-color: transparent; border-radius: 0; border: none; min-height: 300px; box-shadow: none; }
        .content-placeholder > h1 {
            font-size: 1.8rem; margin-bottom: 1.5rem; font-weight: 600;
            color: var(--card-text-color);
            text-align: left; padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--main-color);
            display: inline-block;
        }
        .content-placeholder > h1::before { content: " "; }

        .main-content-tabs {
            display: flex; justify-content: center; flex-wrap: wrap;
            margin-bottom: 2rem; padding: 1rem 1.5rem;
            border-bottom: 2px solid var(--card-border-color); gap: 1rem;
        }
        button.main-tab-button {
            display: inline-flex; align-items: center; gap: 0.7rem;
            padding: 0.8rem 1.5rem; font-size: 1.5rem; font-weight: 500;
            color: var(--tab-inactive-text); background-color: var(--tab-inactive-bg);
            border: 1px solid #444; border-radius: 6px;
            cursor: pointer; transition: all 0.3s ease; font-family: inherit;
        }
        button.main-tab-button i { font-size: 1.8rem; line-height: 1; }
        button.main-tab-button:hover {
            background-color: var(--tab-hover-bg); border-color: #555; color: var(--tab-hover-text);
        }
        button.main-tab-button.active {
            background-color: var(--main-color); color: var(--color-black);
            font-weight: 600; border-color: var(--color-gold-light);
            box-shadow: 0 2px 5px rgba(218, 165, 32, 0.2);
        }

        /* === Fitness Goals Tab (#tabs-1 SetGoals) === */
        .activity-planner.card { background-color: var(--snd-bf-color); margin-top: 1rem; }
        .activity-planner h2 { color: var(--card-accent-color); margin-bottom: 1.5rem; font-size: 1.7rem; }
        .activity-planner h3 { color: var(--card-accent-color); margin-bottom: 1rem; font-size: 1.6rem; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--card-border-color); }
        .activity-planner .activity-form { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1.5rem; align-items: flex-end; margin-bottom: 2rem; }
        .input-group label { display: block; margin-bottom: 0.5rem; color: var(--card-muted-text-color); font-weight: 500; font-size: 1.4rem; }
        .input-group input[type="text"], .input-group input[type="number"], .input-group input[type="time"], .input-group select {
            background-color: var(--input-bg); border: 1px solid var(--input-border-color); color: var(--input-text-color);
            font-size: 1.3rem; padding: 1rem 1.2rem; width: 100%; border-radius: 4px;
        }
        .input-group input[type="text"]:focus, .input-group input[type="number"]:focus, .input-group input[type="time"]:focus, .input-group select:focus {
            outline: none; border-color: var(--input-focus-border-color); box-shadow: 0 0 0 2px var(--input-focus-shadow);
        }
        .input-group select {
             background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23aaaaaa' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
             background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 16px 12px;
             appearance: none; -webkit-appearance: none; -moz-appearance: none;
        }
        #add-activity-btn {
            grid-column: 1 / -1; width: auto; justify-self: start;
            padding: 0.9rem 1.8rem; font-size: 1.4rem; font-weight: 500;
            color: var(--button-primary-text); background-color: var(--button-primary-bg);
            border: 1px solid var(--main-color); border-radius: 6px; cursor: pointer;
            transition: all 0.3s ease; margin-top: 1rem;
        }
        #add-activity-btn:hover { background-color: var(--button-primary-hover-bg); border-color: var(--color-gold-light); transform: translateY(-1px); }
        #weekly-plan-display { margin-top: 2rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
        .day-schedule { background-color: var(--input-bg); padding: 1.5rem; border-radius: 5px; border: 1px solid var(--card-border-color); }
        .day-schedule h4 { color: var(--card-text-color); border-bottom: 1px solid var(--main-color); padding-bottom: 0.5rem; margin-bottom: 1rem; font-weight: 600; font-size: 1.5rem; }
        .day-schedule ul { min-height: 3rem; padding-left: 0; list-style: none; margin: 0; }
        .day-schedule li {
            background-color: var(--card-bg); padding: 1rem 1.5rem; margin-bottom: 0.8rem; border-radius: 4px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid var(--border-color-light); font-size: 1.3rem; word-break: break-word; position: relative; color: var(--card-text-color);
        }
        .day-schedule li .remove-activity-btn { background: none; border: none; color: #f44336; font-size: 1.6rem; line-height: 1; cursor: pointer; padding: 0.2rem 0.5rem; margin-left: 1rem; transition: color 0.2s ease; }
        .day-schedule li .remove-activity-btn:hover { color: #d32f2f; }

        /* === Nutrition Goals Tab (#tabs-3 SetGoals) === */
        .tabs { display: flex; justify-content: center; flex-wrap: wrap; margin-bottom: 1.5rem; border-bottom: 1px solid var(--card-border-color); padding-bottom: 0.5rem; gap: 1rem; }
        .tabs .tab-button { color: var(--tab-inactive-text); font-size: 1.3rem; padding: 0.8rem 1.2rem; border-radius: 4px; transition: color 0.3s ease, background-color 0.3s ease, border-color 0.3s ease; white-space: nowrap; border: 2px solid transparent; background-color: transparent; cursor: pointer; font-weight: 500; }
        .tabs .tab-button:hover { color: var(--tab-hover-text); background-color: var(--tab-hover-bg); }
        .tabs .tab-button.active { background-color: var(--main-color); color: var(--color-black); font-weight: 600; border-color: var(--color-gold-light); }
        .nutrition-tab-content { display: none; padding-top: 1rem; animation: fadeIn 0.5s ease-in-out; }
        .nutrition-tab-content.active { display: block; }
        .nutrition-tab-content h2 { font-size: 1.5rem; margin-bottom: 1.5rem; font-weight: 600; color: var(--card-muted-text-color); text-align: center; }
        .nutrition-details-full { max-width: 700px; margin: 0 auto; }
        .calories-breakdown { display: flex; flex-direction: column; gap: 1rem; margin-bottom: 1.5rem; }
        .meal-item { display: flex; align-items: center; gap: 1rem; padding: 1rem 1.2rem; background-color: var(--snd-bf-color); border-radius: 4px; border: 1px solid var(--card-border-color); }
        .meal-info { font-size: 1.2rem; flex-grow: 1; }
        .meal-info div:first-child { font-weight: 500; color: var(--card-text-color); }
        .meal-info div:last-child { color: var(--card-muted-text-color); font-size: 0.9em; }
        .add-food-btn { background-color: #444; color: var(--card-muted-text-color); margin-left: auto; border: 1px solid #555; padding: 0.5rem 0.8rem; font-size: 1.2rem; line-height: 1; border-radius: 50%; width: 2.8rem; height: 2.8rem; display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; cursor: pointer; transition: background-color 0.2s ease, border-color 0.2s ease; }
        .add-food-btn:hover { background-color: #555; color: var(--text-color); border-color: #666; }
        .calorie-summary { display: flex; flex-direction: column; gap: 1rem; color: var(--card-muted-text-color); font-size: 1.3rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--card-border-color); }
        .summary-item { display: flex; justify-content: space-between; align-items: center; }
        .summary-item span:last-child { font-weight: 600; color: var(--card-text-color); }
        .summary-item span.exercise { color: #f44336; }
        .summary-item.goal span:last-child { color: var(--card-accent-color); font-size: 1.1em; font-weight: bold; }
        .summary-divider { border: none; height: 1px; background-color: var(--card-border-color); margin: 0.5rem 0; }
        .editable { cursor: pointer; border-bottom: 1px dashed var(--card-accent-color); padding-bottom: 1px; transition: background-color 0.2s ease; display: inline-block; color: var(--card-text-color); }
        .editable:hover { background-color: rgba(255, 215, 0, 0.1); }
        .nutrient-header { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 1rem; padding: 0 1rem 1rem 1rem; font-size: 1.1rem; font-weight: 600; text-align: right; border-bottom: 1px solid var(--card-border-color); margin-bottom: 1rem; text-transform: uppercase; color: var(--card-accent-color); }
        .nutrient-list { list-style: none; max-height: 400px; overflow-y: auto; padding-right: 0.5rem; margin:0; }
        .nutrient-list li { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 1rem; padding: 1rem; border-bottom: 1px solid #282828; align-items: center; font-size: 1.3rem; }
        .nutrient-list li:last-child { border-bottom: none; }
        .nutrient-list li span:first-child { font-weight: 500; text-align: left; color: var(--card-text-color); }
        .nutrient-list li span:not(:first-child) { text-align: right; color: var(--card-muted-text-color); }
        .macros-legend { display: flex; flex-direction: column; gap: 1rem; }
        .legend-item { display: grid; grid-template-columns: auto 1fr auto auto; align-items: center; gap: 1rem; font-size: 1.3rem; color: var(--card-text-color); padding: 1rem; background-color: var(--snd-bf-color); border-radius: 4px; border: 1px solid var(--card-border-color); }
        .color-square { width: 14px; height: 14px; display: inline-block; border-radius: 3px; border: 1px solid rgba(255,255,255,0.1); }
        .legend-item .percentage { font-weight: 500; text-align: right; }
        .validation-error { color: #f44336; font-size: 1.2rem; margin-top: 0.5rem; text-align: center; }

        /* Action Button (Generic) */
        .action-button { padding: 0.9rem 1.8rem; font-size: 1.4rem; font-weight: 500; color: var(--button-primary-text); background-color: var(--button-primary-bg); border: 1px solid var(--main-color); border-radius: 6px; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 0.8rem; }
        .action-button:hover { background-color: var(--button-primary-hover-bg); color: var(--button-primary-text); border-color: var(--color-gold-light); transform: translateY(-1px); }
        .action-button i { font-size: 1.6rem; }

        /* === MODAL STYLES (Consolidated from Progress) === */
        .modal {
            display: none; position: fixed; z-index: 1050; left: 0; top: 0; width: 100%; height: 100%;
            overflow: auto; background-color: var(--modal-overlay-bg); align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0s linear 0.3s;
        }
        .modal.show, .modal.active { display: flex; opacity: 1; visibility: visible; transition: opacity 0.3s ease; }
        .modal-content {
            background-color: var(--modal-bg); color: var(--modal-text-color); margin: auto; padding: 2rem 2.5rem;
            border: 1px solid var(--card-border-color); border-radius: 8px; width: 90%; max-width: 450px; /* Default max width */
            box-shadow: 0 4px 15px rgba(0,0,0,0.5); position: relative; font-size: 1.4rem;
            animation: fadeInModal 0.3s ease-out forwards; max-height: 90vh; overflow-y: auto;
        }
        @keyframes fadeInModal { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .modal-content .close-button, .modal-content .modal-close-btn {
            color: var(--color-text-muted); position: absolute; top: 10px; right: 15px; font-size: 2.8rem;
            font-weight: bold; cursor: pointer; line-height: 1; background: none; border: none;
        }
        .modal-content .close-button:hover, .modal-content .modal-close-btn:hover { color: var(--text-color); }
        #logoutConfirmationModal .modal-content { background-color: #fefefe; color: var(--color-black); border-color: #888; }
        #logoutConfirmationModal #logoutModalMessage { color: var(--color-black); }
        #logoutConfirmationModal .close-button:hover, #logoutConfirmationModal .modal-close-btn:hover { color: black; }
        #logoutConfirmationModal #cancelLogoutButton { background-color: #aaa; color: #fff; border: 1px solid #999; }
        #logoutConfirmationModal #cancelLogoutButton:hover { background-color: #888; }
        #logoutConfirmationModal #okLogoutButton { background-color: var(--button-primary-bg); color: var(--button-primary-text); border: 1px solid var(--main-color); }
        #logoutConfirmationModal #okLogoutButton:hover { background-color: var(--button-primary-hover-bg); color: var(--main-color); border-color: var(--color-gold-light); }
        .modal-content p, .modal-content #logoutModalMessage, .modal-content #stopModalMessage, .modal-content #refundModalMessage, .modal-content #confirmSwitchGymActionModalMessage, .modal-content #switchGymSuccessModalMessage, .modal-content #refundRequestSubmittedModalMessage, .modal-content #alertModalMessage {
            font-size: 1.6rem; margin-top: 1rem; margin-bottom: 2rem; line-height: 1.6; text-align: center; font-weight: 500; color: var(--modal-text-color);
        }
        #confirmSwitchGymActionModalMessage strong { color: var(--main-color); display: block; margin-top: 0.5rem; }
        .modal-content .modal-actions { text-align: center; margin-top: 1.5rem; display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }
        .modal-content .modal-actions button, .modal-content .modal-actions-centered .btn, .modal-content #cancelLogoutButton, .modal-content #okLogoutButton, .modal-content #alertModalOkButton {
            font-weight: 600; font-size: 1.4rem; margin: 0; min-width: 100px; padding: 0.9rem 1.8rem; border-radius: 6px; cursor: pointer; transition: all 0.3s ease;
        }
        .modal-content .btn-primary { background-color: var(--button-primary-bg); color: var(--button-primary-text); border: 1px solid var(--main-color); }
        .modal-content .btn-primary:hover { background-color: var(--button-primary-hover-bg); color: var(--main-color); border-color: var(--color-gold-light); box-shadow: 0 0 1rem rgba(255, 215, 0, 0.3); }
        .modal-content .btn-dark-cancel, .modal-content .btn-secondary { background-color: var(--button-secondary-bg); color: var(--button-secondary-text); border: 1px solid #444; }
        .modal-content .btn-dark-cancel:hover, .modal-content .btn-secondary:hover { background-color: var(--button-secondary-hover-bg); border-color: #555; }
        .modal-actions-centered { margin-top: 1.5rem; display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }
        #viewMembershipModal .modal-content { max-width: 550px; text-align: center; }
        #viewMembershipModal h2 { font-size: 2.4rem; color: var(--main-color); margin-bottom: 1.5rem; text-align: center; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border-color-light); }
        #viewMembershipModal .status-details { margin-bottom: 2rem; text-align: center; }
        #viewMembershipModal .status-text { font-size: 1.7rem; margin-bottom: 0.8rem; color: var(--color-text-muted); }
        #viewMembershipModal .status-text .current-status, #viewMembershipModal .status-text .expiry-date { color: var(--text-color); font-weight: 600; }
        #viewMembershipModal .status-text .current-status { color: var(--color-gold-light); }
        #viewMembershipModal .status-note { font-size: 1.3rem; color: var(--color-text-muted); font-style: italic; margin-top: 1rem; }
        #viewMembershipModal .status-actions { display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap; margin-top: 2rem; }
        #viewMembershipModal .status-actions .btn { padding: 1rem 2.5rem; font-size: 1.5rem; flex: 1; min-width: 120px; margin: 0 5px; border-radius: 8px; }
        #viewMembershipModal .status-actions .btn.btn-primary:hover { box-shadow: 0 0 1.6rem var(--main-color); background-color: transparent; color: var(--main-color); }
        #viewMembershipModal .status-actions .btn.btn-secondary { background-color: transparent; color: var(--main-color); border-color: var(--main-color); }
        #viewMembershipModal .status-actions .btn.btn-secondary:hover { background-color: var(--main-color); color: var(--color-black); box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2); }
        #stopMembershipModal .modal-content { max-width: 450px; }
        #stopMembershipModal h3 { color: #d32f2f; font-size: 2rem; margin-bottom: 1.5rem; text-align:center; }
        #confirmStopMembershipBtn.btn-danger { background-color: #d32f2f; border-color: #d32f2f; color: white; }
        #confirmStopMembershipBtn.btn-danger:hover { background-color: #b71c1c; border-color: #b71c1c; color: white; box-shadow: 0 0 1rem rgba(183, 28, 28, 0.5); }
        #switchGymModal .modal-content, #requestRefundModal .modal-content { max-width: 480px; text-align: left; }
        #switchGymModal h3, #requestRefundModal h3, #confirmSwitchGymActionModal h3, #switchGymSuccessModal h3, #refundRequestSubmittedModal h3 { text-align: center; font-size: 2rem; color: var(--main-color); margin-bottom: 2rem; }
        #switchGymModal .form-group, #requestRefundModal .form-group { margin-bottom: 1.5rem; }
        .error-message { display: block; color: var(--error-color); font-size: 1.3rem; margin-top: 0.5rem; text-align: left; }
        #switchGymModal label, #requestRefundModal label { display: block; font-size: 1.5rem; color: var(--color-text-muted); margin-bottom: 0.8rem; font-weight: 500; }
        #switchGymModal select { width: 100%; padding: 1.2rem 1.5rem; font-size: 1.5rem; border-radius: 6px; border: 1px solid var(--input-border-color); background-color: var(--input-bg); color: var(--input-text-color); outline: none; appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23aaaaaa' class='bi bi-caret-down-fill' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 1.5rem center; background-size: 1em; cursor: pointer; }
        #switchGymModal select:focus { border-color: var(--input-focus-border-color); box-shadow: 0 0 0 2px var(--input-focus-shadow); }
        #switchGymModal select option { background-color: var(--input-bg); color: var(--input-text-color); }
        #switchGymModal .modal-actions { margin-top: 2rem; display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }
        #switchGymModal .modal-actions .btn { flex: 1; }
        #requestRefundModal textarea { width: 100%; padding: 1rem 1.2rem; font-size: 1.5rem; border-radius: 6px; border: 1px solid var(--input-border-color); background-color: var(--input-bg); color: var(--input-text-color); outline: none; min-height: 100px; resize: vertical; }
        #requestRefundModal textarea:focus { border-color: var(--input-focus-border-color); box-shadow: 0 0 0 2px var(--input-focus-shadow); }

        /* Log Meal Modal Specific Styles (from SetGoals, adapted) */
        #log-meal-modal .modal-content { max-width: 500px; } /* Keep size from original */
        #log-meal-modal h3 { margin-top: 1rem; margin-bottom: 1.5rem; text-align: center; border-bottom: 1px solid var(--card-border-color); padding-bottom: 1rem; font-size: 1.6rem; color: var(--card-accent-color) !important; }
        #log-meal-modal h3 span { font-weight: normal; font-size: 0.9em; color: var(--card-muted-text-color); }
        #log-meal-modal .edit-input-container { margin-bottom: 1.2rem; }
        #log-meal-modal .edit-input-container label { display: block; font-size: 1.3rem; margin-bottom: 0.5rem; color: var(--card-muted-text-color); font-weight: 500; }
        #log-meal-modal .edit-input-container input[type="text"], #log-meal-modal .edit-input-container input[type="number"], #log-meal-modal .edit-input-container select { width: 100%; padding: 0.8rem 1rem; font-size: 1.25rem; font-family: var(--font-primary); background-color: var(--input-bg); border: 1px solid var(--input-border-color); color: var(--input-text-color); border-radius: 4px; }
        #log-meal-modal .edit-input-container input::placeholder { color: var(--card-muted-text-color); font-size: 1.15rem; }
        #log-meal-modal .edit-input-container input:focus, #log-meal-modal .edit-input-container select:focus { outline: none; border-color: var(--input-focus-border-color); box-shadow: 0 0 0 2px var(--input-focus-shadow); }
        #log-meal-modal .edit-input-container select { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23aaaaaa' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 16px 12px; appearance: none; -webkit-appearance: none; -moz-appearance: none; }
        #log-meal-modal .modal-actions { text-align: center; margin-top: 2rem; }
        #log-meal-modal .logged-items-display { margin-top: 2.5rem; }
        #log-meal-modal .logged-items-display h4 { font-size: 1.5rem; color: var(--card-accent-color) !important; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--card-border-color); }
        #log-meal-modal .logged-items-display ul { list-style: none; padding: 0; max-height: 150px; overflow-y: auto; }
        #log-meal-modal .logged-items-display li { font-size: 1.3rem; padding: 0.8rem 1rem; background-color: var(--input-bg); border-radius: 3px; margin-bottom: 0.5rem; display: flex; justify-content: space-between; align-items: center; color: var(--card-muted-text-color); }
        #log-meal-modal .logged-items-display li .item-details { font-size: 0.9em; color: var(--main-color); }
        #log-meal-modal .logged-items-display li .item-name { flex-grow: 1; margin: 0 1rem; color: var(--card-text-color); }
        #log-meal-modal .logged-items-display li .remove-logged-item-btn { background: none; border: none; color: #f44336; font-size: 1.6rem; cursor: pointer; }
        #log-meal-modal .logged-items-display li .no-items-logged { text-align: center; width: 100%; color: var(--card-muted-text-color); }
        /* #log-meal-modal buttons use .btn-primary, .btn-secondary */
        /* Alert Modal styles from original SetGoals are covered by generic modal styles */
        #alertModal .modal-content { max-width: 400px; }
        /* === END OF MODAL STYLES === */

        /* === FOOTER STYLES (FROM progress.html) === */
        .subscribe-section { background-color: var(--snd-bf-color); padding: 4rem 0; border-top: 1px solid var(--border-color-light); }
        .subscribe-content { max-width: 1200px; margin: 0 auto; padding: 0 2rem; display: grid; grid-template-columns: 1fr 1.5fr; gap: 3rem; align-items: start; }
        .subscribe-text h2 { font-size: 2.4rem; color: var(--main-color); margin-bottom: 1rem; text-align: left; }
        .subscribe-text p { font-size: 1.5rem; color: var(--color-text-muted); margin-bottom: 2rem; line-height: 1.7; }
        .subscribe-form { display: flex; gap: 1rem; margin-bottom: 2rem; }
        .subscribe-form input[type="email"] { flex-grow: 1; padding: 1.2rem 1.5rem; font-size: 1.5rem; border-radius: 6px; border: 1px solid var(--border-color-light); background-color: var(--color-dark-gray); color: var(--text-color); outline: none; }
        .subscribe-form input[type="email"]::placeholder { color: var(--color-text-muted); }
        .subscribe-form input[type="email"]:focus { border-color: var(--main-color); box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.2); }
        .subscribe-form button.btn-primary, .subscribe-form button.btn.btn-primary {
            padding: 1.2rem 2.5rem; font-size: 1.5rem; min-width: auto; border-radius: 6px;
            color: var(--button-primary-text); background-color: var(--button-primary-bg); border: 1px solid var(--main-color); cursor: pointer;
        }
        .subscribe-form button.btn-primary:hover, .subscribe-form button.btn.btn-primary:hover {
            background-color: var(--button-primary-hover-bg); color: var(--main-color); border-color: var(--color-gold-light);
        }
        .social-icons { display: flex; gap: 1.5rem; }
        .social-icons a { color: var(--color-text-muted); font-size: 2.2rem; transition: color 0.3s ease, transform 0.3s ease; }
        .social-icons a:hover { color: var(--main-color); transform: translateY(-3px); }
        .footer-links { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 2rem; }
        .footer-links h4 { font-size: 1.6rem; color: var(--main-color); margin-bottom: 1rem; font-weight: 600; }
        .footer-links ul { list-style: none; padding: 0; margin: 0; }
        .footer-links li { margin-bottom: 0.8rem; }
        .footer-links a { font-size: 1.4rem; color: var(--color-text-muted); transition: color 0.3s ease; }
        .footer-links a:hover { color: var(--text-color); text-decoration: underline; }

        footer { background-color: var(--bg-color); color: var(--color-text-muted); text-align: center; padding: 2rem 0; font-size: 1.3rem; border-top: 1px solid var(--border-color-light); margin-top: auto; }
        footer .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
        /* === END OF FOOTER STYLES === */


        /* === RESPONSIVE STYLES === */
        @media (max-width: 1024px) {
            /* Header adjustments from progress.html */
            .navbar-right img.profile-pic { width: 45px; height: 45px; margin-left: 0; margin-right: 0; }
            .navbar-right { gap: 1.5rem; }
            .welcome-text { font-size: 1.5rem; }
        }

        @media (max-width: 991px) { /* Changed breakpoint to match progress.html */
             /* Layout change */
             main.content-grid { grid-template-columns: 1fr; padding-top: calc(var(--header-height-mobile) + 1.5rem); }
             .calendar-widget { order: -1; margin-bottom: var(--grid-gap); }
             /* Header changes from progress.html */
             header { height: var(--header-height-mobile); padding: 1rem 5%; }
             .logo img { max-width: 100px; }
             #menu-icon { display: block; }
             .navbar {
                 position: absolute; top: 100%; right: -100%; width: 250px; background: var(--color-black); flex-direction: column; align-items: center;
                 padding: 2rem; transition: right .50s ease; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4); border-radius: 0 0 10px 10px;
                 justify-content: flex-start; flex-grow: 0; margin-left: 0; height: auto; overflow-y: visible; border-top: none;
             }
             .navbar.active { right: 5%; display: flex; }
             .navbar-left, .navbar-right { flex-direction: column; width: 100%; align-items: center; gap: 0; }
             .navbar-right { margin-top: 1.5rem; gap: 1.5rem; }
             .navbar li { width: 100%; text-align: center; margin-bottom: 1.5rem; }
             .navbar-right li { margin-bottom: 0; }
             .navbar a { display: block; margin: 0 !important; padding: 1rem 0; font-size: 2rem; text-align: center; border-bottom: none; }
             .navbar a:hover, .navbar a.active { color: var(--main-color); border-bottom: none; }
             .navbar .profile-pic { margin: 0 auto 1rem auto; }
             .profile-menu-container { position: static; width: 100%; margin-bottom: 1rem; }
             .profile-dropdown {
                 position: static; display: block; width: 100%; margin-top: 0.5rem; margin-bottom: 0; box-shadow: none; border: none;
                 border-top: 1px solid var(--border-color-light); border-bottom: 1px solid var(--border-color-light); border-radius: 0;
                 background-color: transparent; padding: 0; animation: none;
             }
             .profile-dropdown li a.dropdown-item { text-align: center; padding: 1rem 1.5rem; font-size: 1.6rem; border-bottom: 1px solid var(--border-color-light); }
             .profile-dropdown li:last-child a.dropdown-item { border-bottom: none; }
             .profile-dropdown li a.dropdown-item:hover { background-color: var(--color-dark-gray); }
             .welcome-text { margin-bottom: 1rem; text-align: center; font-size: 1.6rem; width: auto; padding: 0; border-bottom: none; }
             .navbar-right li a#logout-link { margin-top: 0.5rem; width: auto; padding: 1rem 0; justify-content: center; }
             /* Footer changes from progress.html */
             .subscribe-content { grid-template-columns: 1fr; gap: 2rem; }
             .subscribe-text{ text-align: center; }
             .subscribe-form { justify-content: center; }
             .social-icons { justify-content: center; }
             .footer-links { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); text-align: center;}
        }
         @media (max-width: 767px) {
             /* Header related from progress.html */
             header { padding: 1rem 4%; height: calc(var(--header-height-mobile) - 10px); }
             main.content-grid { padding-top: calc(var(--header-height-mobile) - 10px + 1rem); }
             /* SetGoals specific adjustments */
             .main-tab-button { font-size: 1.3rem; padding: 0.7rem 1.2rem; }
             .main-content-tabs { padding: 1rem; gap: 0.8rem; }
             .activity-planner .activity-form { grid-template-columns: 1fr; } /* Stack form elements */
             .day-schedule li { background-color: var(--snd-bf-color); }
             /* Footer changes from progress.html */
             .subscribe-form { flex-direction: column; align-items: stretch; }
             .subscribe-form button.btn-primary, .subscribe-form button.btn.btn-primary { width: 100%; }
             .footer-links { text-align: center;}
             /* Modal adjustments */
             .modal-content { padding: 1.5rem; max-width: 95%; }
             .modal-content p, .modal-content #logoutModalMessage, .modal-content #stopModalMessage, .modal-content #refundModalMessage, .modal-content #confirmSwitchGymActionModalMessage, .modal-content #switchGymSuccessModalMessage, .modal-content #refundRequestSubmittedModalMessage, .modal-content #alertModalMessage { font-size: 1.4rem; }
             #viewMembershipModal .modal-content { width: 90%; max-width: 95%; }
             #viewMembershipModal .status-actions { flex-direction: column; align-items: stretch; gap: 1rem; }
             #viewMembershipModal .status-actions .btn { width: 100%; min-width: unset; }
             .modal-actions-centered .btn { width: 100%; }
         }
         @media (max-width: 480px) {
              /* Header from progress.html */
              header { padding: 0.8rem 3%; height: calc(var(--header-height-mobile) - 20px); }
              main.content-grid { padding-top: calc(var(--header-height-mobile) - 20px + 1rem); }
              #menu-icon { font-size: 3.2rem; }
              .logo img { max-width: 70px; }
              /* SetGoals specific */
              .activity-planner .activity-form { grid-template-columns: 1fr; }
              #weekly-plan-display { grid-template-columns: 1fr; }
              .main-tab-button { font-size: 1.2rem; padding: 0.6rem 1rem; gap: 0.5rem;}
              .main-tab-button i { font-size: 1.6rem; }
              .content-placeholder { padding: 1rem; }
              .content-placeholder > h1 { font-size: 1.6rem; }
              .modal-content { padding: 1.5rem; font-size: 1.3rem; }
              #log-meal-modal h3 { font-size: 1.5rem; }
              #log-meal-modal .edit-input-container label { font-size: 1.2rem; }
              #log-meal-modal .edit-input-container input, #log-meal-modal .edit-input-container select { font-size: 1.2rem; padding: 0.6rem 0.8rem; }
              #log-meal-modal .modal-actions button { font-size: 1.3rem; padding: 0.8rem 1.5rem; }
              .calendar-widget h2 { font-size: 1.6rem; }
              .calendar-widget .input-block label { font-size: 1.2rem; }
              .calendar-widget .info-input { font-size: 1.2rem; }
              .activity-planner h2 { font-size: 1.6rem; }
              .activity-planner h3 { font-size: 1.5rem; }
              .input-group label { font-size: 1.3rem; }
              .input-group input, .input-group select { font-size: 1.25rem; }
              #add-activity-btn { font-size: 1.3rem; }
              .day-schedule h4 { font-size: 1.4rem; }
              .day-schedule li { font-size: 1.2rem; }
              .tabs .tab-button { font-size: 1.2rem; }
              .nutrition-tab-content h2 { font-size: 1.4rem; }
              /* Footer from progress.html */
              .footer-links { grid-template-columns: repeat(2, 1fr); }
              /* Modal buttons from progress.html */
              .modal-content .modal-actions button, .modal-content #cancelLogoutButton, .modal-content #okLogoutButton, .modal-content #alertModalOkButton, .modal-actions-centered .btn {
                 font-size: 1.3rem; padding: 0.8rem 1.5rem; min-width: 90px; width: 100%; margin-bottom: 0.5rem;
              }
              .modal-actions-centered .btn:last-child { margin-bottom: 0; }
              #logoutModalMessage, #stopModalMessage, #refundModalMessage, #confirmSwitchGymActionModalMessage, #switchGymSuccessModalMessage, #refundRequestSubmittedModalMessage, #alertModalMessage { font-size: 1.4rem; }
              .modal-content .close-button, .modal-content .modal-close-btn { font-size: 2.2rem; top: 0.8rem; right: 1rem;}
         }
        /* === END RESPONSIVE STYLES === */
    </style>
</head>
<body>

    <!-- HEADER FROM progress.html -->
    <header>
        <a href="home.html" class="logo"><img src="../images/logo.png" alt="OptiLife Logo"></a>
        <div class='bx bx-menu' id="menu-icon"></div>
        <ul class="navbar">
             <div class="navbar-left">
                 <li><a href="home.html">Home</a></li>
                 <li><a href="setGoals.html" class="active">Set Goals</a></li>
                 <li><a href="progress.html">Track Progress</a></li>
                 <li><a href="membership.html">Membership</a></li>
             </div>
             <div class="navbar-right">
                <li class="profile-menu-container">
                     <img src="../images/user_pic.jpg" alt="User Profile" class="profile-pic" id="profilePicTrigger">
                     <ul class="profile-dropdown" id="profileDropdown">
                         <li>
                             <a href="#" id="view-membership-link" class="dropdown-item">
                                 <i class='bx bx-id-card'></i> View Membership
                             </a>
                         </li>
                         <li>
                             <a href="#" id="request-refund-link" class="dropdown-item">
                                 <i class='bx bx-revision'></i> Request Refund
                             </a>
                         </li>
                         <li>
                             <a href="#" id="switch-gym-link" class="dropdown-item">
                                 <i class='bx bx-transfer-alt'></i> Switch Gym
                             </a>
                         </li>
                     </ul>
                 </li>
                 <li>
                     <span class="welcome-text">Welcome, <span id="header-user-name">Han Soyoung</span>!</span>
                 </li>
                 <li>
                     <a href="signin.html" id="logout-link">
                         <i class='bx bx-log-out'></i>
                         Logout
                     </a>
                 </li>
             </div>
        </ul>
    </header>
    <!-- END HEADER -->

    <main class="content-grid">
        <!-- Sidebar (Original SetGoals Sidebar Structure) -->
        <div class="calendar-widget card">
            <h2>User Information</h2>
            <div class="calendar-header">
                <span class="current-month-year">User Profile & Goals</span>
            </div>
            <div class="input-block"> <label for="startDate">Start Date</label> <input type="date" id="startDate" name="startDate" class="info-input" value="2025-01-15"> </div>
            <div class="input-block"> <label for="overallGoals">Overall Goals</label> <input type="text" id="overallGoals" name="overallGoals" class="info-input" placeholder="Enter your goals here..." value="Improved overall fitness, Increased muscle strength"> </div>
            <div class="input-block"> <label for="currentWeight">Current Weight (kg)</label> <input type="number" step="0.1" id="currentWeight" name="currentWeight" class="info-input" placeholder="e.g., 70.5" value="45"> </div>
            <div class="input-block"> <label for="goalWeight">Goal Weight (kg)</label> <input type="number" step="0.1" id="goalWeight" name="goalWeight" class="info-input" placeholder="e.g., 65.0" value="40"> </div>
            <div class="input-block"> <label for="weightLossGoal">Weekly Goal</label> <select id="weightLossGoal" name="weightLossGoal" class="info-input"> <option value="1">Lose 1 kg per week</option> <option value="0.75">Lose 0.75 kg per week</option> <option value="0.5" selected>Lose 0.5 kg per week</option> <option value="0.25">Lose 0.25 kg per week</option> <option value="0">Maintain current weight</option> <option value="-0.25">Gain 0.25 kg per week</option> <option value="-0.5">Gain 0.5 kg per week</option> </select> </div>
            <div class="input-block"> <label for="activity-level">Activity Level</label> <select id="activity-level" name="activity-level" class="info-input"> <option value="Not Very Active">Not Very Active</option> <option value="Lightly Active" selected>Lightly Active</option> <option value="Active">Active</option> <option value="Very Active">Very Active</option> </select> </div>
        </div>
        <!-- End Sidebar -->

        <!-- Main Content Tabs (Original SetGoals Structure) -->
         <div class="main-tab-content card">
            <nav class="main-content-tabs">
                <button class="main-tab-button active" data-target="#tabs-1">
                    <i class='bx bx-dumbbell'></i> Fitness Goals
                </button>
                <button class="main-tab-button" data-target="#tabs-3">
                    <i class='bx bx-restaurant'></i> Nutrition Goals
                </button>
            </nav>

            <div id="tabs-1" class="tab-content active">
                <div class="content-placeholder">
                    <h1>Set Your Fitness Goal</h1>
                    <div class="workout-schedule-container">
                        <section class="activity-planner card">
                             <h2>Plan Your Weekly Activities</h2>
                            <form id="activity-form" class="activity-form">
                                <div class="input-group"> <label for="activity-day">Day:</label> <select id="activity-day" name="activity-day"> <option value="Monday">Monday</option> <option value="Tuesday">Tuesday</option> <option value="Wednesday">Wednesday</option> <option value="Thursday">Thursday</option> <option value="Friday">Friday</option> <option value="Saturday">Saturday</option> <option value="Sunday">Sunday</option> </select> </div>
                                <div class="input-group"> <label for="activity-type">Workout Type:</label> <select id="activity-type" name="activity-type"> <option>Upper Body and Lower Body Split</option> <option>Full Body</option> <option>Core</option> <option>Push/Pull/Legs</option> <option>Circuit Training</option> <option>Cardio</option> <option>Weightlifting</option> <option>HIIT</option> <option>CrossFit</option> <option>Yoga</option> <option>Pilates</option> <option>Stretching</option> <option>Rest Day</option> </select> </div>
                                <div class="input-group"> <label for="activity-name">Activity:</label> <input type="text" id="activity-name" name="activityName" placeholder="e.g., Running, Bench Press" > </div>
                                <div class="input-group"> <label for="activity-reps">Reps:</label> <input type="text" id="activity-reps" name="activityReps" placeholder="e.g., 3-5, 8-12" > </div>
                                <div class="input-group"> <label for="activity-sets">Sets:</label> <input type="number" id="activity-sets" name="activitySets" placeholder="e.g., 3" > </div>
                                <div class="input-group"> <label for="activity-weight">Weight(lb):</label> <input type="text" step="0.5" id="activity-weight" name="activityWeight" placeholder="e.g., 50, Bodyweight" > </div>
                                <div class="input-group"> <label for="activity-duration">Duration:</label> <input type="text" id="activity-duration" name="activityDuration" placeholder="e.g., 30 min, 1 hr" > </div>
                                <button type="submit" id="add-activity-btn">Add Activity to Plan</button>
                            </form>
                            <h3>Weekly Schedule:</h3>
                            <div id="weekly-plan-display">
                                <div class="day-schedule"><h4>Monday</h4><ul data-day="Monday"></ul></div>
                                <div class="day-schedule"><h4>Tuesday</h4><ul data-day="Tuesday"></ul></div>
                                <div class="day-schedule"><h4>Wednesday</h4><ul data-day="Wednesday"></ul></div>
                                <div class="day-schedule"><h4>Thursday</h4><ul data-day="Thursday"></ul></div>
                                <div class="day-schedule"><h4>Friday</h4><ul data-day="Friday"></ul></div>
                                <div class="day-schedule"><h4>Saturday</h4><ul data-day="Saturday"></ul></div>
                                <div class="day-schedule"><h4>Sunday</h4><ul data-day="Sunday"></ul></div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>

            <div id="tabs-3" class="tab-content">
                 <div class="content-placeholder">
                    <h1>Set Nutrition Goals</h1>
                    <nav class="tabs">
                        <button class="tab-button active" data-tab="calories">CALORIES</button>
                        <button class="tab-button" data-tab="nutrients">NUTRIENTS</button>
                        <button class="tab-button" data-tab="macros">MACROS</button>
                    </nav>

                    <div id="calories-content" class="nutrition-tab-content active">
                        <h2>Calories Breakdown</h2>
                        <div class="calories-breakdown">
                            <div class="meal-item"><span class="color-square calorie-breakfast" style="background-color: #bf9a33;"></span><div class="meal-info"><div>Breakfast</div><div data-value="breakfast-calories">0% (0 cal)</div></div> <button class="add-food-btn" data-meal-type="Breakfast" title="Log Breakfast Item"><i class='bx bx-plus'></i></button> </div>
                            <div class="meal-item"><span class="color-square calorie-lunch" style="background-color: #febd14;"></span><div class="meal-info"><div>Lunch</div><div data-value="lunch-calories">0% (0 cal)</div></div> <button class="add-food-btn" data-meal-type="Lunch" title="Log Lunch Item"><i class='bx bx-plus'></i></button> </div>
                            <div class="meal-item"><span class="color-square calorie-dinner" style="background-color: #fece43;"></span><div class="meal-info"><div>Dinner</div><div data-value="dinner-calories">0% (0 cal)</div></div> <button class="add-food-btn" data-meal-type="Dinner" title="Log Dinner Item"><i class='bx bx-plus'></i></button> </div>
                            <div class="meal-item"><span class="color-square calorie-snacks" style="background-color: #feda75;"></span><div class="meal-info"><div>Snacks</div><div data-value="snack-calories">0% (0 cal)</div></div> <button class="add-food-btn" data-meal-type="Snacks" title="Log Snack Item"><i class='bx bx-plus'></i></button> </div>
                        </div>
                        <div class="calorie-summary">
                            <div class="summary-item"><span>Total Calories Consumed</span><span data-value="total-calories">0</span></div>
                            <div class="summary-item"><span>Exercise Calories Burned</span><span data-value="exercise-calories" class="exercise editable" data-editable="true" data-id="exercise-calories" data-type="number" data-unit="cal" data-label="Exercise Calories" title="Click to edit" data-goal-value="0">0 cal</span></div>
                            <div class="summary-item net-calories-item"><span>Net Calories</span><span data-value="net-calories">0</span></div>
                            <hr class="summary-divider">
                            <div class="summary-item goal"><span>Calorie Goal</span><span data-value="goal-calories" class="editable" data-editable="true" data-id="calorie-goal" data-type="number" data-unit="cal" data-label="Calorie Goal" title="Click to edit" data-goal-value="1520">1520</span></div>
                            <div class="summary-item"><span>Calories Remaining</span><span data-value="calories-remaining">1520</span></div>
                        </div>

                        <section class="meal-logging-section" style="display:none;"> <!-- Hidden by default -->
                            <h3>Log Your Meals for <span id="selectedDateForMealLog">Today</span> (Example Logging)</h3>
                            <!-- ... (rest of logging form, kept for JS functionality if needed) ... -->
                            <button type="button" id="updateNutritionSummaryBtn" class="action-button">
                                <i class='bx bx-calculator'></i> Calculate Nutrition
                            </button>
                        </section>
                    </div>

                    <div id="nutrients-content" class="nutrition-tab-content">
                         <h2>Set Nutrient Goals</h2>
                         <div class="nutrition-details-full">
                            <div class="nutrient-header"><span>Nutrient</span><span>Total</span> <span>Goal</span><span>Left</span> </div>
                               <ul class="nutrient-list">
                                   <li data-nutrient="protein"><span>Protein</span><span data-value="protein-total">0 g</span><span class="editable" data-editable="true" data-id="protein-goal" data-type="number" data-unit="g" data-label="Protein Goal" title="Click to edit" data-goal-value="76">76 g</span><span data-value="protein-left">76 g</span></li>
                                   <li data-nutrient="carbohydrates"><span>Carbohydrates</span><span data-value="carbs-total">0 g</span><span class="editable" data-editable="true" data-id="carbs-goal" data-type="number" data-unit="g" data-label="Carbohydrates Goal" title="Click to edit" data-goal-value="190">190 g</span><span data-value="carbs-left">190 g</span></li>
                                   <li data-nutrient="fiber"><span>Fiber</span><span data-value="fiber-total">0 g</span><span class="editable" data-editable="true" data-id="fiber-goal" data-type="number" data-unit="g" data-label="Fiber Goal" title="Click to edit" data-goal-value="25">25 g</span><span data-value="fiber-left">25 g</span></li>
                                   <li data-nutrient="sugar"><span>Sugar</span><span data-value="sugar-total">0 g</span><span class="editable" data-editable="true" data-id="sugar-goal" data-type="number" data-unit="g" data-label="Sugar Goal (max)" title="Click to edit" data-goal-value="57">57 g</span><span data-value="sugar-left">57 g</span></li>
                                   <li data-nutrient="fat"><span>Fat</span><span data-value="fat-total">0 g</span><span class="editable" data-editable="true" data-id="fat-goal" data-type="number" data-unit="g" data-label="Fat Goal" title="Click to edit" data-goal-value="51">51 g</span><span data-value="fat-left">51 g</span></li>
                                   <li data-nutrient="saturated_fat"><span>Saturated Fat</span><span data-value="satfat-total">0 g</span><span class="editable" data-editable="true" data-id="satfat-goal" data-type="number" data-unit="g" data-label="Saturated Fat Goal (max)" title="Click to edit" data-goal-value="17">17 g</span><span data-value="satfat-left">17 g</span></li>
                                   <li data-nutrient="polyunsaturated_fat"><span>Polyunsaturated Fat</span><span data-value="polyfat-total">0 g</span><span class="editable" data-editable="true" data-id="polyfat-goal" data-type="number" data-unit="g" data-label="Polyunsaturated Fat Goal" title="Click to edit" data-goal-value="0">0 g</span><span data-value="polyfat-left">0 g</span></li>
                                   <li data-nutrient="monounsaturated_fat"><span>Monounsaturated Fat</span><span data-value="monofat-total">0 g</span><span class="editable" data-editable="true" data-id="monofat-goal" data-type="number" data-unit="g" data-label="Monounsaturated Fat Goal" title="Click to edit" data-goal-value="0">0 g</span><span data-value="monofat-left">0 g</span></li>
                                   <li data-nutrient="trans_fat"><span>Trans Fat</span><span data-value="transfat-total">0 g</span><span class="editable" data-editable="true" data-id="transfat-goal" data-type="number" data-unit="g" data-label="Trans Fat Goal (max)" title="Click to edit" data-goal-value="0">0 g</span><span data-value="transfat-left">0 g</span></li>
                                   <li data-nutrient="cholesterol"><span>Cholesterol</span><span data-value="cholesterol-total">0 mg</span><span class="editable" data-editable="true" data-id="cholesterol-goal" data-type="number" data-unit="mg" data-label="Cholesterol Goal (max)" title="Click to edit" data-goal-value="300">300 mg</span><span data-value="cholesterol-left">300 mg</span></li>
                                   <li data-nutrient="sodium"><span>Sodium</span><span data-value="sodium-total">0 mg</span><span class="editable" data-editable="true" data-id="sodium-goal" data-type="number" data-unit="mg" data-label="Sodium Goal (max)" title="Click to edit" data-goal-value="2300">2,300 mg</span><span data-value="sodium-left">2,300 mg</span></li>
                                   <li data-nutrient="potassium"><span>Potassium</span><span data-value="potassium-total">0 mg</span><span class="editable" data-editable="true" data-id="potassium-goal" data-type="number" data-unit="mg" data-label="Potassium Goal" title="Click to edit" data-goal-value="3500">3,500 mg</span><span data-value="potassium-left">3,500 mg</span></li>
                                   <li data-nutrient="vitamin_a"><span>Vitamin A</span><span data-value="vita-total">0 %</span><span class="editable" data-editable="true" data-id="vita-goal" data-type="number" data-unit="%" data-label="Vitamin A Goal (%DV)" title="Click to edit" data-goal-value="100">100 %</span><span data-value="vita-left">100 %</span></li>
                                   <li data-nutrient="vitamin_c"><span>Vitamin C</span><span data-value="vitc-total">0 %</span><span class="editable" data-editable="true" data-id="vitc-goal" data-type="number" data-unit="%" data-label="Vitamin C Goal (%DV)" title="Click to edit" data-goal-value="100">100 %</span><span data-value="vitc-left">100 %</span></li>
                                   <li data-nutrient="calcium"><span>Calcium</span><span data-value="calcium-total">0 %</span><span class="editable" data-editable="true" data-id="calcium-goal" data-type="number" data-unit="%" data-label="Calcium Goal (%DV)" title="Click to edit" data-goal-value="100">100 %</span><span data-value="calcium-left">100 %</span></li>
                                   <li data-nutrient="iron"><span>Iron</span><span data-value="iron-total">0 %</span><span class="editable" data-editable="true" data-id="iron-goal" data-type="number" data-unit="%" data-label="Iron Goal (%DV)" title="Click to edit" data-goal-value="100">100 %</span><span data-value="iron-left">100 %</span></li>
                               </ul>
                           </div>
                    </div>

                    <div id="macros-content" class="nutrition-tab-content">
                         <h2>Set Macronutrient Ratio Goals</h2>
                         <p style="text-align: center; color: var(--card-muted-text-color); font-size: 1.2rem;" ><em>Goals should total 100%</em></p>
                         <div class="nutrition-details-full">
                            <div class="macros-legend">
                                 <div class="legend-item" data-macro="carbs">
                                    <span class="color-square" style="background-color: #febd14;"></span>
                                    <span>Carbohydrates (<span data-value="macro-carbs-g">0g</span>)</span>
                                    <span class="percentage" data-value="macro-carbs-perc">0%</span>
                                    <span class="editable" data-editable="true" data-id="carbs-goal-perc" data-type="number" data-unit="%" data-label="Carbohydrates Goal %" title="Click to edit" data-goal-value="50">50%</span>
                                </div>
                                 <div class="legend-item" data-macro="fat">
                                    <span class="color-square" style="background-color: #fece43;"></span>
                                    <span>Fat (<span data-value="macro-fat-g">0g</span>)</span>
                                    <span class="percentage" data-value="macro-fat-perc">0%</span>
                                    <span class="editable" data-editable="true" data-id="fats-goal-perc" data-type="number" data-unit="%" data-label="Fat Goal %" title="Click to edit" data-goal-value="30">30%</span>
                                </div>
                                 <div class="legend-item" data-macro="protein">
                                    <span class="color-square" style="background-color: #feda75;"></span>
                                    <span>Protein (<span data-value="macro-protein-g">0g</span>)</span>
                                    <span class="percentage" data-value="macro-protein-perc">0%</span>
                                    <span class="editable" data-editable="true" data-id="protein-goal-perc" data-type="number" data-unit="%" data-label="Protein Goal %" title="Click to edit" data-goal-value="20">20%</span>
                                </div>
                            </div>
                            <p id="macro-goal-warning" class="validation-error" style="text-align: center; margin-top: 1.5rem; display: none;"></p>
                         </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Main Content Tabs -->
    </main>

    <!-- MODALS -->
    <!-- Log Meal Modal (Existing in SetGoals) -->
     <div class="modal" id="log-meal-modal" role="dialog" aria-labelledby="log-meal-title" aria-modal="true">
        <div class="modal-content card">
            <button class="modal-close-btn" aria-label="Close modal"></button>
            <h3 id="log-meal-title">Log Food Item for <span id="log-meal-modal-date">Date</span></h3>
            <form id="log-meal-form">
                <input type="hidden" id="log-meal-date-hidden" name="logDate">
                 <div class="edit-input-container"> <label for="log-meal-type">Meal Type:</label> <select id="log-meal-type" name="mealType" required> <option value="Breakfast">Breakfast</option> <option value="Lunch">Lunch</option> <option value="Dinner">Dinner</option> <option value="Snacks">Snacks</option> </select> </div>
                 <div class="edit-input-container"> <label for="log-food-name">Food Name:</label> <input type="text" id="log-food-name" name="foodName" required placeholder="e.g., Apple, medium"> </div>
                 <div class="edit-input-container"> <label for="log-calories">Calories (kcal):</label> <input type="number" id="log-calories" name="calories" required min="0" step="1" placeholder="e.g., 95"> </div>
                 <div class="edit-input-container"> <label for="log-protein">Protein (g):</label> <input type="number" id="log-protein" name="protein" min="0" step="0.1" placeholder="e.g., 0.5" value="0"> </div>
                 <div class="edit-input-container"> <label for="log-carbs">Carbs (g):</label> <input type="number" id="log-carbs" name="carbs" min="0" step="0.1" placeholder="e.g., 25" value="0"> </div>
                 <div class="edit-input-container"> <label for="log-fat">Fat (g):</label> <input type="number" id="log-fat" name="fat" min="0" step="0.1" placeholder="e.g., 0.3" value="0"> </div>
                 <p id="log-meal-validation-error" class="validation-error" style="display: none;"></p>
                <div class="modal-actions">
                    <button type="submit" id="log-meal-save-button" class="btn-primary">Log Item</button> <!-- Added btn-primary -->
                </div>
            </form>
            <div class="logged-items-display">
                 <h4>Logged Today (<span id="logged-items-date-display">Date</span>):</h4>
                 <ul id="logged-items-list">
                     <li class="no-items-logged">No items logged yet for this date.</li>
                 </ul>
             </div>
        </div>
    </div>

    <!-- Logout Confirmation Modal (Adapted from Progress) -->
    <div id="logoutConfirmationModal" class="modal">
        <div class="modal-content">
            <button id="closeLogoutModalButton" class="close-button" aria-label="Close modal"></button>
            <p id="logoutModalMessage">Are you sure you want to logout?</p>
            <div class="modal-actions">
                 <button id="cancelLogoutButton" class="btn-secondary">Cancel</button>
                 <button id="okLogoutButton" class="btn-primary">Logout</button>
            </div>
        </div>
    </div>

    <!-- Alert Modal (Existing in SetGoals) -->
    <div id="alertModal" class="modal">
        <div class="modal-content">
            <button id="closeAlertModalButton" class="modal-close-btn" aria-label="Close modal"></button>
            <p id="alertModalMessage">Alert Message Goes Here</p>
            <div class="modal-actions">
                 <button id="alertModalOkButton" class="btn-primary">OK</button>
            </div>
        </div>
    </div>

    <!-- Added Modals (from Progress/Membership) -->
    <!-- View Membership Modal -->
    <div id="viewMembershipModal" class="modal">
        <div class="modal-content">
            <button id="closeViewMembershipModalButton" class="modal-close-btn" aria-label="Close modal"></button>
            <h2>Your Current Membership</h2>
            <div class="status-details">
                <p class="status-text"> Plan: <span class="current-status" id="modal-user-membership-plan">Premium</span> </p>
                <p class="status-text"> Expires: <span class="expiry-date" id="modal-user-membership-expiry">March 15, 2025</span> </p>
                <p class="status-note"> Manage your subscription below. Extending adds time to your current expiry date. </p>
            </div>
            <div class="status-actions">
                <a href="paymentMethods.html?action=extend" id="modal-extend-membership-link" class="btn btn-primary">Extend Membership</a>
                <button type="button" id="modal-stop-membership-button" class="btn btn-secondary">Stop Membership</button>
            </div>
        </div>
    </div>
    <!-- Stop Membership Confirmation Modal -->
    <div id="stopMembershipModal" class="modal">
        <div class="modal-content">
            <button id="closeStopModalButton" class="modal-close-btn" aria-label="Close modal"></button>
            <h3>Confirm Membership Cancellation</h3>
            <p id="stopModalMessage">Are you sure you want to stop your membership at the end of the current period? This action cannot be undone easily.</p>
            <div class="modal-actions-centered">
                 <button id="cancelStopMembershipBtn" class="btn btn-dark-cancel">Keep Membership</button>
                 <button id="confirmStopMembershipBtn" class="btn btn-primary btn-danger">Confirm Stop</button>
            </div>
        </div>
    </div>
    <!-- Request Refund Modal -->
    <div id="requestRefundModal" class="modal">
        <div class="modal-content">
            <button id="closeRequestRefundModalButton" class="modal-close-btn" aria-label="Close modal"></button>
            <h3>Request a Refund</h3>
            <form id="requestRefundForm">
                <div class="form-group">
                    <label for="refund-reason">Reason for Refund:</label>
                    <textarea id="refund-reason" name="refundReason" placeholder="Please explain why you are requesting a refund..."></textarea>
                    <span class="error-message" id="refund-reason-error"></span>
                </div>
                <div class="modal-actions-centered">
                    <button type="button" id="cancelRefundRequestBtn" class="btn btn-dark-cancel">Cancel</button>
                    <button type="submit" id="submitRefundRequestBtn" class="btn btn-primary">Submit Request</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Refund Request Submitted Modal -->
    <div id="refundRequestSubmittedModal" class="modal">
      <div class="modal-content">
          <button id="closeRefundRequestSubmittedModalButton" class="modal-close-btn" aria-label="Close modal"></button>
          <h3>Refund Request Submitted</h3>
          <p id="refundRequestSubmittedModalMessage"> Your refund request has been submitted. We will review it and get back to you soon. </p>
          <div class="modal-actions-centered"> <button id="okRefundSubmittedButton" class="btn btn-primary">OK</button> </div>
      </div>
    </div>
    <!-- Switch Gym Modal (Form) -->
    <div id="switchGymModal" class="modal">
        <div class="modal-content">
            <button id="closeSwitchGymModalButton" class="modal-close-btn" aria-label="Close modal"></button>
            <h3>Switch Your Gym</h3>
            <form id="switchGymForm">
                <div class="form-group">
                    <label for="gym-select">Select Gym:</label>
                    <select id="gym-select" name="gym">
                        <option value="">-- Select Gym Name --</option> <option value="near">Gym Near You (Autodetect)</option> <option value="elite">Elite Fitness Hub</option> <option value="iron">Iron Haven</option> <option value="elevate">Elevate Athletics</option>
                    </select>
                    <span class="error-message" id="gym-select-error"></span>
                </div>
                <div class="form-group">
                    <label for="location-select">Select Location (if not autodetected):</label>
                    <select id="location-select" name="location">
                        <option value="">-- Select Location --</option> <option value="boulder">1760 Pearl Street, Boulder, CO 80302, USA</option> <option value="manchester">52 Portland Street, Manchester M1 4QU, United Kingdom</option> <option value="qc">102 Timog Avenue, Barangay Sacred Heart, Quezon City, Metro Manila 1103, Philippines</option>
                    </select>
                    <span class="error-message" id="location-select-error"></span>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancelSwitchGymBtn" class="btn btn-dark-cancel">Cancel</button>
                    <button type="submit" id="confirmSwitchGymBtn" class="btn btn-primary">Confirm Switch</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Confirm Switch Gym Action Modal -->
    <div id="confirmSwitchGymActionModal" class="modal">
        <div class="modal-content">
            <button id="closeConfirmSwitchGymActionModalButton" class="modal-close-btn" aria-label="Close modal"></button>
            <h3>Confirm Gym Switch</h3>
            <p id="confirmSwitchGymActionModalMessage"> You are about to switch to: <strong id="confirmGymNameText"></strong> at location: <strong id="confirmGymLocationText"></strong> Are you sure you want to proceed? </p>
            <div class="modal-actions-centered">
                <button type="button" id="cancelSwitchGymActionBtn" class="btn btn-dark-cancel">Cancel</button>
                <button type="button" id="confirmSwitchGymActionActualBtn" class="btn btn-primary">Yes, Switch Gym</button>
            </div>
        </div>
    </div>
    <!-- Switch Gym Success Modal -->
    <div id="switchGymSuccessModal" class="modal">
        <div class="modal-content">
            <button id="closeSwitchGymSuccessModalButton" class="modal-close-btn" aria-label="Close modal"></button>
            <h3>Switch Successful</h3>
            <p id="switchGymSuccessModalMessage"> Your gym switch request has been submitted. </p>
            <div class="modal-actions-centered"> <button type="button" id="okSwitchGymSuccessBtn" class="btn btn-primary">OK</button> </div>
        </div>
    </div>
    <!-- END Added Modals -->

     <!-- FOOTER FROM progress.html -->
     <section id="subscribe" class="subscribe-section">
        <div class="container subscribe-content">
             <div class="subscribe-text">
                <h2>Subscribe</h2>
                <p>Join our fitness family and get tips, exclusive updates, and special offers. Start your journey today!</p>
                <form class="subscribe-form" id="subscribeForm">
                    <input type="email" id="subscribeEmail" placeholder="Email" required>
                    <button type="submit" class="btn btn-primary">Send</button>
                </form>
                <div class="social-icons">
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-links">
                 <div><h4>Company</h4><ul><li><a href="#">Press</a></li><li><a href="#">Blog</a></li><li><a href="#">About</a></li><li><a href="#">Careers</a></li></ul></div> <div><h4>Services</h4><ul><li><a href="#">Training</a></li><li><a href="#">Nutrition</a></li><li><a href="#">Lifestyles</a></li></ul></div> <div><h4>Legal</h4><ul><li><a href="#">Policy</a></li><li><a href="#">Privacy & Cookies</a></li><li><a href="#">Terms & Conditions</a></li></ul></div> <div><h4>Community</h4><ul><li><a href="#">Contact</a></li><li><a href="#">Find a club</a></li><li><a href="#">Membership</a></li></ul></div> <div><h4>Gym</h4><ul><li><a href="#">Book a Gym</a></li><li><a href="#">Find a Gym</a></li></ul></div>
                 <div>
                    <h4>System Developed By</h4>
                    <ul>
                        <li><a href="#">Sintoy, Joebert</a></li>
                        <li><a href="#">Paliqueron, Khem</a></li>
                        <li><a href="#">Iglesia, Jose</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    <footer>
        <div class="container">
            <p> 2024 OPTILIFE. All Rights Reserved.</p>
        </div>
    </footer>
    <!-- END FOOTER -->

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>

    <script>
      $(document).ready(function() {
          // === Header, Profile Dropdown, Logout Modal JS (Combined from Progress/Membership) ===
          var menuIcon = $('#menu-icon');
          var navbar = $('.navbar');
          var logoutLink = $('#logout-link');
          var logoutModal = $('#logoutConfirmationModal');
          const $profilePicTrigger = $('#profilePicTrigger');
          const $profileDropdown = $('#profileDropdown');

          // New Modal Triggers from profile dropdown
          const $viewMembershipLink = $('#view-membership-link');
          const $requestRefundLink = $('#request-refund-link');
          const $switchGymLink = $('#switch-gym-link');

          // New Modal Elements
          const $viewMembershipModal = $('#viewMembershipModal');
          const $modalStopMembershipButton = $('#modal-stop-membership-button'); // Button inside viewMembershipModal
          const $stopMembershipModal = $('#stopMembershipModal');
          const $requestRefundModal = $('#requestRefundModal');
          const $refundRequestSubmittedModal = $('#refundRequestSubmittedModal');
          const $switchGymModal = $('#switchGymModal');
          const $confirmSwitchGymActionModal = $('#confirmSwitchGymActionModal');
          const $switchGymSuccessModal = $('#switchGymSuccessModal');

          // Alert Modal (from original SetGoals)
          const $alertModal = $('#alertModal');
          const $alertModalMessage = $('#alertModalMessage');

          // Log Meal Modal (from original SetGoals)
          const $logMealModal = $('#log-meal-modal');
          const $logMealForm = $('#log-meal-form');
          const $logMealModalDate = $('#log-meal-modal-date');
          const $logMealDateHidden = $('#log-meal-date-hidden');
          const $logMealTypeSelect = $('#log-meal-type');
          const $loggedItemsList = $('#logged-items-list');
          const $loggedItemsDateDisplay = $('#logged-items-date-display');
          const $logMealValidationError = $('#log-meal-validation-error');

          function closeOverlays() {
              if ($profileDropdown.hasClass('active')) { $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active'); }
              if (navbar.hasClass('active') && $(window).width() <= 991) { navbar.removeClass('active'); menuIcon.removeClass('bx-x'); }
          }

          if (menuIcon.length && navbar.length) {
              menuIcon.on('click', function() {
                  $(this).toggleClass('bx-x'); navbar.toggleClass('active');
                  if ($profileDropdown.hasClass('active') && $(window).width() > 991) { $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active'); }
              });
              $(window).on('scroll', function() { closeOverlays(); });
          }

          if ($profilePicTrigger.length && $profileDropdown.length) {
              $profilePicTrigger.on('click', function(event) {
                  event.stopPropagation(); $profileDropdown.toggleClass('active'); $profilePicTrigger.toggleClass('active');
                  if (navbar.hasClass('active') && $(window).width() > 991) { navbar.removeClass('active'); menuIcon.removeClass('bx-x'); }
              });
              $(document).on('click', function(event) {
                  if (!$profileDropdown.is(event.target) && $profileDropdown.has(event.target).length === 0 && !$profilePicTrigger.is(event.target)) {
                      if ($profileDropdown.hasClass('active')) { $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active'); }
                  }
              });
          }

          navbar.on('click', 'a', function(event) {
              const $clickedLink = $(this);
              const isModalTrigger = $clickedLink.is($viewMembershipLink) || $clickedLink.is($requestRefundLink) || $clickedLink.is($switchGymLink);
              if ($clickedLink.is($profilePicTrigger)) { return; }
              if (isModalTrigger && $clickedLink.attr('href') === '#') { event.preventDefault(); }
              if (navbar.hasClass('active') && $(window).width() <= 991) {
                  navbar.removeClass('active'); menuIcon.removeClass('bx-x');
                  if ($profileDropdown.hasClass('active')) { $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active'); }
              } else if ($profileDropdown.hasClass('active') && $clickedLink.closest($profileDropdown).length) {
                  $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active');
              }
          });

          // --- View Membership Modal Logic ---
          if ($viewMembershipLink.length && $viewMembershipModal.length) {
              $viewMembershipLink.on('click', function(event) { event.preventDefault(); closeOverlays(); loadMembershipStatus(); $viewMembershipModal.addClass('active'); });
              $viewMembershipModal.on('click', '#closeViewMembershipModalButton', function() { $viewMembershipModal.removeClass('active'); });
              if ($modalStopMembershipButton.length && $stopMembershipModal.length) {
                  $modalStopMembershipButton.on('click', function() { $viewMembershipModal.removeClass('active'); $stopMembershipModal.addClass('active'); });
              }
          }
          if ($stopMembershipModal.length) {
              $stopMembershipModal.on('click', '#closeStopModalButton, #cancelStopMembershipBtn', function() { $stopMembershipModal.removeClass('active'); });
              $('#confirmStopMembershipBtn').on('click', function() { console.log("Membership stop confirmed (placeholder action)"); alert("Your request to stop the membership has been processed (placeholder)."); $stopMembershipModal.removeClass('active'); });
          }

          // --- Request Refund Modal Logic ---
          if ($requestRefundLink.length && $requestRefundModal.length && $refundRequestSubmittedModal.length) {
              $requestRefundLink.on('click', function(event) { event.preventDefault(); closeOverlays(); $('#requestRefundForm')[0].reset(); $('#refund-reason-error').text(''); $requestRefundModal.addClass('active'); });
              $requestRefundModal.on('click', '#closeRequestRefundModalButton, #cancelRefundRequestBtn', function() { $requestRefundModal.removeClass('active'); });
              $('#requestRefundForm').on('submit', function(event) {
                  event.preventDefault(); const reason = $('#refund-reason').val().trim(); const $reasonError = $('#refund-reason-error'); $reasonError.text('');
                  if (!reason) { $reasonError.text('Please enter a reason for your refund request.'); return; }
                  console.log("Refund Request Submitted. Reason:", reason); $requestRefundModal.removeClass('active'); $refundRequestSubmittedModal.addClass('active');
              });
              $refundRequestSubmittedModal.on('click', '#closeRefundRequestSubmittedModalButton, #okRefundSubmittedButton', function() { $refundRequestSubmittedModal.removeClass('active'); });
          }

          // --- Switch Gym Modals Logic ---
          if ($switchGymLink.length && $switchGymModal.length && $confirmSwitchGymActionModal.length && $switchGymSuccessModal.length) {
              $switchGymLink.on('click', function(event) { event.preventDefault(); closeOverlays(); $('#switchGymForm')[0].reset(); $('#gym-select-error, #location-select-error').text(''); $switchGymModal.addClass('active'); });
              $switchGymModal.on('click', '#closeSwitchGymModalButton, #cancelSwitchGymBtn', function() { $switchGymModal.removeClass('active'); });
              $('#switchGymForm').on('submit', function(event) {
                  event.preventDefault(); const selectedGymValue = $('#gym-select').val(); const selectedGymText = $('#gym-select option:selected').text(); const selectedLocationValue = $('#location-select').val(); const selectedLocationText = $('#location-select option:selected').text(); const $gymError = $('#gym-select-error'); const $locationError = $('#location-select-error'); let isValid = true; $gymError.text(''); $locationError.text('');
                  if (!selectedGymValue) { $gymError.text('Please select a gym.'); isValid = false; }
                  if (selectedGymValue !== "near" && !selectedLocationValue) { $locationError.text('Please select a location.'); isValid = false; }
                  if (!isValid) return; $('#confirmGymNameText').text(selectedGymText); $('#confirmGymLocationText').text(selectedLocationValue ? selectedLocationText : (selectedGymValue === "near" ? "Autodetected" : "N/A")); $switchGymModal.removeClass('active'); $confirmSwitchGymActionModal.addClass('active');
              });
              $confirmSwitchGymActionModal.on('click', '#closeConfirmSwitchGymActionModalButton, #cancelSwitchGymActionBtn', function() { $confirmSwitchGymActionModal.removeClass('active'); });
              $('#confirmSwitchGymActionActualBtn').on('click', function() {
                  const gymText = $('#confirmGymNameText').text(); const locationText = $('#confirmGymLocationText').text(); console.log("Switch Gym Confirmed. Gym:", gymText, "Location:", locationText);
                  $confirmSwitchGymActionModal.removeClass('active'); $('#switchGymSuccessModalMessage').html(`Your gym switch request to <strong>${gymText}</strong> (Location: <strong>${locationText}</strong>) has been submitted.`); $switchGymSuccessModal.addClass('active'); $('#switchGymForm')[0].reset();
              });
              $switchGymSuccessModal.on('click', '#closeSwitchGymSuccessModalButton, #okSwitchGymSuccessBtn', function() { $switchGymSuccessModal.removeClass('active'); });
          }

          // --- Logout Modal Logic ---
          if (logoutLink.length && logoutModal.length) {
              logoutLink.on('click', function(event) { event.preventDefault(); closeOverlays(); logoutModal.addClass('active'); });
              logoutModal.on('click', '.close-button, #cancelLogoutButton', function() { logoutModal.removeClass('active'); }); // Used .close-button from progress
              $('#okLogoutButton').on('click', function() { logoutModal.removeClass('active'); window.location.href = logoutLink.attr('href'); });
          }

          // --- Alert Modal JS ---
          function showAlertModal(message) { $alertModalMessage.text(message); $alertModal.addClass('active'); }
          $alertModal.on('click', '.modal-close-btn, #alertModalOkButton', function() { $alertModal.removeClass('active'); });

          // --- Log Meal Modal JS ---
          let selectedDate = moment().format('YYYY-MM-DD'); // Keep track of selected date
          const foodLog = {}; // Simple in-memory log for demo

          function openLogMealModal(event) {
              const mealType = $(event.currentTarget).data('meal-type');
              $logMealTypeSelect.val(mealType);
              const displayDate = moment(selectedDate); // Use the current selectedDate
              $logMealModalDate.text(displayDate.format('MMMM D, YYYY'));
              $logMealDateHidden.val(displayDate.format('YYYY-MM-DD'));
              $loggedItemsDateDisplay.text(displayDate.format('MMMM D'));
              $logMealValidationError.hide().text('');
              displayLoggedItemsForDate(displayDate.format('YYYY-MM-DD'));
              $logMealModal.addClass('active');
              $logMealForm[0].reset();
              $('#log-meal-type').val(mealType); // Ensure correct meal type is selected
              $('#log-food-name').focus();
          }
          function closeLogMealModal() { $logMealModal.removeClass('active'); $logMealForm[0].reset(); $logMealValidationError.hide().text(''); }
          $('.add-food-btn').on('click', openLogMealModal);
          $logMealModal.on('click', '.modal-close-btn', closeLogMealModal); // Note: No #log-meal-cancel-button exists in the HTML
          $logMealForm.on('submit', handleLogMealSubmit);
          $loggedItemsList.on('click', '.remove-logged-item-btn', removeLoggedItem);

          function displayLoggedItemsForDate(dateStr) {
              $loggedItemsList.empty(); const items = foodLog[dateStr] || [];
              if (items.length === 0) { $loggedItemsList.append('<li class="no-items-logged">No items logged yet for this date.</li>'); }
              else {
                  items.forEach((item, index) => {
                      $loggedItemsList.append(`
                          <li>
                              <span class="item-details">[${item.mealType}]</span>
                              <span class="item-name">${item.foodName}</span>
                              <span class="item-details">${item.calories} kcal</span>
                              <button class="remove-logged-item-btn" data-index="${index}" title="Remove Item"><i class="fas fa-times"></i></button>
                          </li>`);
                  });
              }
          }
          function removeLoggedItem(event) {
             const $button = $(event.currentTarget).closest('.remove-logged-item-btn');
             const indexToRemove = $button.data('index'); const dateStr = $logMealDateHidden.val();
             if (foodLog[dateStr] && foodLog[dateStr][indexToRemove] !== undefined) {
                 foodLog[dateStr].splice(indexToRemove, 1);
                 displayLoggedItemsForDate(dateStr); updateNutritionDisplay();
             }
          }
          function handleLogMealSubmit(event) {
              event.preventDefault(); $logMealValidationError.hide().text('');
              const foodName = $('#log-food-name').val().trim(); const calories = $('#log-calories').val();
              if (!foodName) { $logMealValidationError.text('Food Name is required.').show(); return; }
              if (calories === '' || isNaN(calories) || parseFloat(calories) < 0) { $logMealValidationError.text('Valid Calories (0 or more) are required.').show(); return; }
              const dateForLog = $logMealDateHidden.val();
              const newItem = {
                  id: Date.now(), date: dateForLog, mealType: $logMealTypeSelect.val(), foodName: foodName,
                  calories: parseFloat(calories), protein: parseFloat($('#log-protein').val()) || 0,
                  carbs: parseFloat($('#log-carbs').val()) || 0, fat: parseFloat($('#log-fat').val()) || 0,
              };
              if (!foodLog[dateForLog]) foodLog[dateForLog] = [];
              foodLog[dateForLog].push(newItem);
              displayLoggedItemsForDate(dateForLog); updateNutritionDisplay();
              $('#log-food-name, #log-calories, #log-protein, #log-carbs, #log-fat').val('');
              $('#log-protein, #log-carbs, #log-fat').val('0'); $('#log-food-name').focus();
          }

          // --- Generic Modal Close on Overlay Click ---
          $(window).on('click', function(e) {
              if ($(e.target).is('.modal') && $(e.target).hasClass('active')) {
                  $(e.target).removeClass('active');
              }
          });

          // === SetGoals Specific JS (Activity Planner, Nutrition Goal Editing) ===
          $('#startDate').on('change', function() { // Update selectedDate if user changes the start date
             selectedDate = $(this).val();
             updateNutritionDisplay();
             $('#selectedDateForMealLog').text(moment(selectedDate).format('MMMM D, YYYY'));
             // You might want to clear/update the logged food display if the date changes
             displayLoggedItemsForDate(selectedDate);
          });

          const activityLog = {}; // Simple in-memory log
          const $activityForm = $('#activity-form');
          const $weeklyPlanDisplay = $('#weekly-plan-display');

          function addActivityToPlan(event) {
              event.preventDefault();
              const day = $('#activity-day').val();
              const type = $('#activity-type').val();
              const name = $('#activity-name').val().trim();
              const reps = $('#activity-reps').val().trim();
              const sets = $('#activity-sets').val().trim();
              const weight = $('#activity-weight').val().trim();
              const duration = $('#activity-duration').val().trim();

              if (!day || (!name && type !== 'Rest Day' && !reps && !sets && !weight && !duration )) { showAlertModal('Please select a day and fill at least one activity detail (or select Rest Day).'); return; }

              let displayText = `<strong>${type}</strong>${name ? ': ' + name : ''}`;
              const details = [];
              if (reps) details.push(`Reps: ${reps}`);
              if (sets) details.push(`Sets: ${sets}`);
              if (weight) details.push(`Weight: ${weight}lb`);
              if (duration) details.push(`Duration: ${duration}`);
              if (details.length > 0) displayText += ` <small><em>(${details.join(', ')})</em></small>`;
              else if (type === 'Rest Day' && !name && details.length === 0) displayText = `<strong>Rest Day</strong>`;


              const $dayList = $weeklyPlanDisplay.find(`ul[data-day="${day}"]`);
              const $listItem = $(`<li>${displayText}<button class="remove-activity-btn" title="Remove Activity"><i class="fas fa-times"></i></button></li>`);
              $dayList.find('.no-activities').remove(); $dayList.append($listItem);

              if (!activityLog[day]) activityLog[day] = [];
              activityLog[day].push({ type, name, reps, sets, weight, duration });
              $('#activity-form')[0].reset(); // Clear the form
          }
          function removeActivityFromPlan(event) {
              const $listItem = $(event.currentTarget).closest('li');
              const $dayList = $listItem.closest('ul');
              const day = $dayList.data('day');
              const itemIndex = $listItem.index();
              if (activityLog[day] && activityLog[day][itemIndex] !== undefined) {
                  activityLog[day].splice(itemIndex, 1); // Remove from internal log
              }
              $listItem.remove(); // Remove from UI
              if ($dayList.children().length === 0) { // Optional: Add back placeholder if list is empty
                  // $dayList.append('<li class="no-activities">No activities planned.</li>');
              }
          }
          $activityForm.on('submit', addActivityToPlan);
          $weeklyPlanDisplay.on('click', '.remove-activity-btn', removeActivityFromPlan);

          // --- Nutrition Goal Editing & Display Logic ---
          function updateNutritionDisplay() {
              const itemsForSelectedDate = foodLog[selectedDate] || [];
              let totals = { calories: 0, protein: 0, carbs: 0, fat: 0, fiber: 0, sugar: 0, satfat: 0, polyfat: 0, monofat: 0, transfat: 0, cholesterol: 0, sodium: 0, potassium: 0, vita: 0, vitc: 0, calcium: 0, iron: 0 };
              let mealTotals = { Breakfast: 0, Lunch: 0, Dinner: 0, Snacks: 0 };

              itemsForSelectedDate.forEach(item => {
                  Object.keys(totals).forEach(key => { if(item[key]) totals[key] += item[key]; });
                  if (mealTotals.hasOwnProperty(item.mealType) && item.calories) mealTotals[item.mealType] += item.calories;
              });

              const totalCaloriesConsumed = totals.calories;
              $('[data-value="total-calories"]').text(Math.round(totalCaloriesConsumed).toLocaleString());
              Object.keys(mealTotals).forEach(meal => {
                  const percentage = totalCaloriesConsumed > 0 ? Math.round((mealTotals[meal] / totalCaloriesConsumed) * 100) : 0;
                  $(`[data-value="${meal.toLowerCase()}-calories"]`).text(`${percentage}% (${Math.round(mealTotals[meal]).toLocaleString()} cal)`);
              });

              const goalCalories = parseFloat($('[data-id="calorie-goal"]').attr('data-goal-value')) || 0;
              const exerciseCalories = parseFloat($('[data-id="exercise-calories"]').attr('data-goal-value')) || 0;
              const netCalories = Math.round(totalCaloriesConsumed - exerciseCalories);
              $('[data-value="net-calories"]').text(netCalories.toLocaleString());
              $('[data-value="calories-remaining"]').text(Math.round(goalCalories - netCalories).toLocaleString());
              // Update display of goals themselves (in case they were edited)
              $('[data-id="exercise-calories"]').text(`${exerciseCalories.toLocaleString()} cal`);
              $('[data-id="calorie-goal"]').text(`${goalCalories.toLocaleString()}`);

               $('.nutrient-list li').each(function() {
                  const $li = $(this); const nutrientKey = $li.data('nutrient');
                  const $goalSpan = $li.find('.editable[data-id$="-goal"]');
                  const unit = $goalSpan.data('unit') || 'g';
                  const goalValue = parseFloat($goalSpan.attr('data-goal-value')) || 0;
                  const totalValue = totals[nutrientKey] || 0; // Assume nutrientKey matches totals object key directly
                  const leftValue = Math.max(0, goalValue - totalValue);
                  const decimals = (unit ==='g' && totalValue < 10 && totalValue !== 0 && !Number.isInteger(totalValue)) ? 1:0;

                  $li.find(`[data-value$="-total"]`).text(`${totalValue.toFixed(decimals)}${unit ? ' ' + unit : ''}`);
                  $li.find(`[data-value$="-left"]`).text(`${leftValue.toFixed(decimals)}${unit ? ' ' + unit : ''}`);
                  // Update goal display too in case it was edited via prompt
                  $goalSpan.text(`${goalValue.toLocaleString(undefined, {maximumFractionDigits: (unit ==='%' ? 0 : 1)})}${unit ? (unit === '%' ? '%' : ` ${unit}`) : ''}`);
               });

              // Update Macro display based on consumption and goals
              const totalMacroCalories = (totals.protein * 4) + (totals.carbs * 4) + (totals.fat * 9);
              const proteinPerc = totalMacroCalories > 0 ? Math.round((totals.protein * 4 / totalMacroCalories) * 100) : 0;
              const carbsPerc = totalMacroCalories > 0 ? Math.round((totals.carbs * 4 / totalMacroCalories) * 100) : 0;
              const fatPerc = totalMacroCalories > 0 ? Math.max(0, 100 - proteinPerc - carbsPerc) : 0;
              $('[data-value="macro-protein-g"]').text(totals.protein.toFixed(1) + 'g');
              $('[data-value="macro-carbs-g"]').text(totals.carbs.toFixed(1) + 'g');
              $('[data-value="macro-fat-g"]').text(totals.fat.toFixed(1) + 'g');
              $('[data-value="macro-protein-perc"]').text(proteinPerc + '%');
              $('[data-value="macro-carbs-perc"]').text(carbsPerc + '%');
              $('[data-value="macro-fat-perc"]').text(fatPerc + '%');
              checkMacroGoalTotal(); // Update goal display and check sum
          }

          function handleEditableClick(event) {
              const $target = $(event.currentTarget);
              const originalValueText = $target.text();
              const currentValue = $target.attr('data-goal-value') || originalValueText.replace(/[^0-9.]/g, '');
              const label = $target.data('label') || 'value';
              const unit = $target.data('unit') || '';

              const newValue = prompt(`Enter new ${label}:`, currentValue);

              if (newValue !== null && newValue !== '') {
                  const parsedValue = parseFloat(newValue);
                  if (!isNaN(parsedValue) && parsedValue >= 0) {
                       $target.attr('data-goal-value', parsedValue); // Store the raw value
                       // Update display - format based on unit
                       let displayText = parsedValue.toLocaleString(undefined, {maximumFractionDigits: (unit === '%' ? 0 : (unit === 'g' ? 1 : 0))});
                       if(unit) displayText += (unit === '%' ? '%' : ` ${unit}`);
                       $target.text(displayText); // Update text immediately
                       updateNutritionDisplay(); // Recalculate everything
                  } else {
                       showAlertModal('Invalid input. Please enter a non-negative number.');
                       // Restore original text if needed (though attribute is unchanged)
                       //$target.text(originalValueText);
                  }
              }
              // If prompt is cancelled (null) or cleared (empty string), do nothing, keep original value/text
           }
          function checkMacroGoalTotal() {
              let totalPerc = 0;
              $('.macros-legend .editable[data-id$="-goal-perc"]').each(function() { totalPerc += parseFloat($(this).attr('data-goal-value')) || 0; });
              const $macroWarning = $('#macro-goal-warning');
              if ($macroWarning.length) {
                  if (Math.round(totalPerc) !== 100) { $macroWarning.text(`Warning: Macro goals sum to ${totalPerc.toFixed(0)}%, should be 100%.`).show(); }
                  else { $macroWarning.hide(); }
              }
              // Ensure the display of macro goals is updated correctly after potential edits
              $('.macros-legend .editable[data-id$="-goal-perc"]').each(function() {
                 const $el = $(this); const goalVal = parseFloat($el.attr('data-goal-value')) || 0;
                 $el.text(`${goalVal.toFixed(0)}%`); // Display goal percentage
              });
          }
          $('.main-tab-content').on('click', '.editable[data-editable="true"]', handleEditableClick);
          $('#updateNutritionSummaryBtn').on('click', updateNutritionDisplay); // Trigger update if the button is clicked

          // --- Initial Setup ---
          function loadUserName() { let userName = "Han Soyoung"; $('#header-user-name').text(userName); }
          loadUserName();
          updateNutritionDisplay(); // Initial calculation
          checkMacroGoalTotal(); // Initial check
          $('#selectedDateForMealLog').text(moment(selectedDate).format('MMMM D, YYYY'));

          // Tab Switching JS
          $('.main-tab-button').on('click', function() {
              const targetSelector = $(this).data('target');
              $('.main-tab-button').removeClass('active'); $(this).addClass('active');
              $('.main-tab-content .tab-content').removeClass('active'); $(targetSelector).addClass('active');
          });
          $('.tabs .tab-button').on('click', function() {
              const tabId = $(this).data('tab'); const $container = $(this).closest('.content-placeholder');
              $container.find('.tabs .tab-button').removeClass('active'); $(this).addClass('active');
              $container.find('.nutrition-tab-content').removeClass('active'); $container.find('#' + tabId + '-content').addClass('active');
              updateNutritionDisplay(); // Update display when switching nutrition sub-tabs
          });

          // Footer Subscribe Form JS
          $('#subscribeForm').on('submit', function(e){
            e.preventDefault(); const email = $('#subscribeEmail').val();
            showAlertModal(`Subscribed with ${email}! (Demo)`); $('#subscribeEmail').val('');
          });

          function loadMembershipStatus() { // For View Membership Modal
                let userName = "Han Soyoung";
                $('#header-user-name').text(userName);
                const userPlan = "Premium";
                const expiryDate = "2025-03-15";
                $('#modal-user-membership-plan').text(userPlan);
                $('#modal-user-membership-expiry').text(moment(expiryDate).format('MMMM D, YYYY'));
          }
          // Initial load for header name is done earlier
          // loadMembershipStatus() is called only when the modal is opened.

      });
    </script>

</body>
</html>
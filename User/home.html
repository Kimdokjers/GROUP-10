<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Page - OptiLife</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          text-decoration: none;
          list-style: none;
          border: none;
          outline: none;
      }

      :root {
          /* Consistent Variables */
          --bg-color: #000;
          --snd-bf-color: #111;
          --text-color: #fff;
          --main-color: #FFD700;
          --color-black: #0a0a0a;
          --color-dark-gray: #1a1a1a;
          --color-gold: #daa520;
          --color-gold-light: #f0c44c;
          --color-text-muted: #aaaaaa;
          --border-color-light: #333;
          --header-height-desktop: 100px;
          --header-height-mobile: 80px;
          --font-primary: 'Poppins', sans-serif;
          --modal-overlay-bg: rgba(0, 0, 0, 0.7);
          --button-primary-bg: var(--main-color);
          --button-primary-text: var(--color-black);
          --button-primary-hover-bg: var(--color-gold-light); /* Using the hover from progress/setgoals */
          --button-secondary-bg: #555;
          --button-secondary-text: var(--text-color);
          --button-secondary-hover-bg: #666;
          --modal-bg-dark: var(--color-dark-gray);
          --modal-text-dark: var(--text-color);
          --modal-bg: var(--color-dark-gray); /* Alias */
          --modal-text-color: var(--text-color); /* Alias */
          --error-color: #f44336;
          --input-bg: #252525; /* Needed for modal forms */
          --input-border-color: var(--border-color-light); /* Needed for modal forms */
          --input-text-color: var(--text-color); /* Needed for modal forms */
          --input-focus-border-color: var(--main-color); /* Needed for modal forms */
          --input-focus-shadow: rgba(255, 215, 0, 0.3); /* Needed for modal forms */
      }

      html {
          font-size: 62.5%;
          overflow-x: hidden;
          scroll-behavior: smooth;
      }

      body {
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: var(--font-primary);
        line-height: 1.6;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }

      img {
          max-width: 100%;
          height: auto;
          display: block;
      }

      /* === HEADER STYLES (Consistent) === */
      header {
          position: fixed;
          width: 100%;
          height: var(--header-height-desktop);
          top: 0;
          left: 0;
          z-index: 1000;
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem 9%;
          background: rgba(0, 0, 0, 0.7);
          backdrop-filter: blur(10px);
          transition: background 0.5s ease, backdrop-filter 0.5s ease, height 0.3s ease, padding 0.3s ease;
          box-sizing: border-box;
          border-bottom: 1px solid var(--border-color-light);
      }
      .logo { cursor: pointer; transition: 0.3s ease-in-out; flex-shrink: 0; display: flex; align-items: center; }
      .logo img { max-width: 100px; height: auto; transition: max-width 0.3s ease; }
      .logo:hover { transform: scale(1.05); }
      .navbar { display: flex; justify-content: space-between; align-items: center; list-style: none; padding: 0; margin: 0; flex-grow: 1; margin-left: 4rem; transition: left 0.3s ease-in-out, right 0.5s ease; }
      .navbar-left, .navbar-right { display: flex; align-items: center; padding: 0; margin: 0; }
      .navbar-right { gap: 2rem; }
      .navbar li { margin: 0; padding: 0; display: flex; align-items: center; }
      .navbar a { font-size: 1.8rem; font-weight: 500; color: var(--text-color); transition: all 0.3s ease; border-bottom: 3px solid transparent; white-space: nowrap; padding: 0.5rem 0; }
      .navbar-left li a { margin-left: 4rem; }
      .navbar-left li:first-child a { margin-left: 0; }
      .navbar-right .profile-menu-container { position: relative; }
      .welcome-text { font-size: 1.6rem; color: var(--color-text-muted); white-space: nowrap; }
      .welcome-text span#header-user-name { font-weight: 500; color: var(--text-color); }
      .navbar-right li a#logout-link { margin-left: 0; display: flex; align-items: center; gap: 0.6rem; border-bottom: none; padding: 0.5rem 0.8rem; border-radius: 4px; }
      .navbar-right li a#logout-link i { font-size: 2rem; line-height: 1; transition: color 0.3s ease; }
      .navbar a:hover, .navbar a.active { color: var(--main-color); border-bottom-color: var(--main-color); }
      .navbar-right li a#logout-link:hover { color: var(--main-color); border-bottom-color: transparent; background-color: rgba(255, 215, 0, 0.1); }
      .navbar-right li a#logout-link:hover i { color: var(--main-color); }
      .navbar .profile-pic { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; display: block; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease, width 0.3s ease, height 0.3s ease; border: 2px solid transparent; }
      .navbar .profile-pic:hover { transform: scale(1.05); box-shadow: 0 0 10px rgba(var(--main-color), 0.5); }
      .navbar .profile-pic.active { border-color: var(--main-color); box-shadow: 0 0 10px rgba(var(--main-color), 0.5); }
      #menu-icon { font-size: 4.5rem; color: var(--main-color); cursor: pointer; display: none; margin-left: 2rem; z-index: 1001; }
      .profile-dropdown { display: none; position: absolute; top: 100%; right: 0; margin-top: 10px; background-color: var(--snd-bf-color); border: 1px solid var(--border-color-light); border-radius: 6px; min-width: 180px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); z-index: 1100; padding: 0.5rem 0; list-style: none; animation: fadeInDropdown 0.2s ease-out; }
      .profile-dropdown.active { display: block; }
      @keyframes fadeInDropdown { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
      .profile-dropdown li a.dropdown-item { display: flex; align-items: center; padding: 0.8rem 1.5rem; font-size: 1.4rem; color: var(--text-color); font-weight: 400; white-space: nowrap; transition: background-color 0.2s ease, color 0.2s ease; border-bottom: none; }
      .profile-dropdown li a.dropdown-item:hover { background-color: var(--color-dark-gray); color: var(--main-color); border-bottom-color: transparent; }
      .profile-dropdown li a.dropdown-item i { margin-right: 0.8rem; font-size: 1.6rem; vertical-align: middle; position: relative; top: -1px; color: var(--color-text-muted); transition: color 0.2s ease; }
      .profile-dropdown li a.dropdown-item:hover i { color: var(--main-color); }
      /* === END HEADER === */

      /* === MAIN CONTENT === */
      main { padding-top: var(--header-height-desktop); flex-grow: 1; }
      .container { max-width: 1200px; margin-left: auto; margin-right: auto; padding: 0 2rem; }
      .gym-display { padding: 5rem 2rem; display: flex; align-items: center; justify-content: space-between; gap: 4rem; max-width: 1140px; margin-left: auto; margin-right: auto; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
      main > section.gym-display:not(:last-of-type) { margin-bottom: 4rem; }
      .gym-display:nth-of-type(odd) { background-color: var(--color-dark-gray); }
      .gym-display:nth-of-type(even) { background-color: var(--snd-bf-color); }
      main > section.gym-display:first-of-type { margin-top: 4rem; /* Adjusted from calc, simpler margin */ }
      .gym-content { flex: 1 1 55%; max-width: 55%; display: flex; flex-direction: column; align-items: flex-start; gap: 2rem; color: var(--text-color); }
      .gym-image { flex: 1 1 40%; max-width: 40%; text-align: center; }
      .gym-image img { width: 100%; height: auto; border-radius: 10px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); display: block; margin: 0 auto; }
      .gym-content h1 { font-size: 3.8rem; line-height: 1.2; font-weight: 700; color: var(--text-color); }
      .gym-content h1 span { color: var(--main-color); }
      .gym-content p { font-size: 1.6rem; color: var(--color-text-muted); line-height: 1.7; margin-bottom: 1.5rem; }
      .gym-content .action-button { padding: 1.3rem 3rem; font-size: 1.7rem; } /* Use action-button class if needed */

      /* Button Styles (Combined from original Home and Progress) */
      .btn, .btn-primary, .action-button { /* Combine for consistency */
          display: inline-block; padding: 1.2rem 3rem; border-radius: 0.8rem; font-weight: 600; text-align: center; cursor: pointer;
          transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease, box-shadow 0.5s ease;
          border: 2px solid var(--main-color); font-size: 1.7rem; color: var(--button-primary-text); background: var(--button-primary-bg);
          letter-spacing: 0.1rem; box-shadow: none;
      }
      .btn:hover, .btn-primary:hover, .action-button:hover {
          background-color: var(--button-primary-hover-bg); /* Updated hover bg */
          color: var(--main-color); /* Updated hover text */
          box-shadow: 0 0 1.6rem rgba(255, 215, 0, 0.5); /* Adjusted glow */
          transform: translateY(-2px); border-color: var(--main-color); /* Ensure border stays */
      }
      .btn-secondary {
           display: inline-block; padding: 1.2rem 3rem; border-radius: 0.8rem; font-weight: 600; text-align: center; cursor: pointer;
           transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease; border: 1px solid #444; /* Use progress style */
           font-size: 1.7rem; background: var(--button-secondary-bg); color: var(--button-secondary-text);
      }
      .btn-secondary:hover { background: var(--button-secondary-hover-bg); border-color: #555; transform: translateY(-1px); }
      /* === END MAIN CONTENT === */

      /* === MODAL STYLES (Consistent) === */
      .modal { display: none; position: fixed; z-index: 1050; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: var(--modal-overlay-bg); align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0s linear 0.3s; }
      .modal.show, .modal.active { display: flex; opacity: 1; visibility: visible; transition: opacity 0.3s ease; }
      .modal-content { background-color: var(--modal-bg); color: var(--modal-text-color); margin: auto; padding: 2rem 2.5rem; border: 1px solid var(--card-border-color); border-radius: 8px; width: 90%; max-width: 450px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); position: relative; font-size: 1.4rem; animation: fadeInModal 0.3s ease-out forwards; max-height: 90vh; overflow-y: auto; }
      @keyframes fadeInModal { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
      .modal-content .close-button, .modal-content .modal-close-btn { color: var(--color-text-muted); position: absolute; top: 10px; right: 15px; font-size: 2.8rem; font-weight: bold; cursor: pointer; line-height: 1; background: none; border: none; }
      .modal-content .close-button:hover, .modal-content .modal-close-btn:hover { color: var(--text-color); }
      #logoutConfirmationModal .modal-content { background-color: #fefefe; color: var(--color-black); border-color: #888; max-width: 400px; } /* Adjusted max-width */
      #logoutConfirmationModal #logoutModalMessage { color: var(--color-black); }
      #logoutConfirmationModal .close-button:hover, #logoutConfirmationModal .modal-close-btn:hover { color: black; }
      #logoutConfirmationModal #cancelLogoutButton { background-color: #aaa; color: #fff; border: 1px solid #999; }
      #logoutConfirmationModal #cancelLogoutButton:hover { background-color: #888; }
      #logoutConfirmationModal #okLogoutButton { background-color: var(--button-primary-bg); color: var(--button-primary-text); border: 1px solid var(--main-color); }
      #logoutConfirmationModal #okLogoutButton:hover { background-color: var(--button-primary-hover-bg); color: var(--main-color); border-color: var(--color-gold-light); }
      .modal-content p, .modal-content #logoutModalMessage, .modal-content #stopModalMessage, .modal-content #refundModalMessage, .modal-content #confirmSwitchGymActionModalMessage, .modal-content #switchGymSuccessModalMessage, .modal-content #refundRequestSubmittedModalMessage, .modal-content #alertModalMessage { font-size: 1.6rem; margin-top: 1rem; margin-bottom: 2rem; line-height: 1.6; text-align: center; font-weight: 500; color: var(--modal-text-color); }
      #confirmSwitchGymActionModalMessage strong { color: var(--main-color); display: block; margin-top: 0.5rem; }
      .modal-content .modal-actions { text-align: center; margin-top: 1.5rem; display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }
      .modal-content .modal-actions button, .modal-content .modal-actions-centered .btn, .modal-content #cancelLogoutButton, .modal-content #okLogoutButton, .modal-content #alertModalOkButton { font-weight: 600; font-size: 1.4rem; margin: 0; min-width: 100px; padding: 0.9rem 1.8rem; border-radius: 6px; cursor: pointer; transition: all 0.3s ease; }
      .modal-content .btn-primary { background-color: var(--button-primary-bg); color: var(--button-primary-text); border: 1px solid var(--main-color); }
      .modal-content .btn-primary:hover { background-color: var(--button-primary-hover-bg); color: var(--main-color); border-color: var(--color-gold-light); box-shadow: 0 0 1rem rgba(255, 215, 0, 0.3); }
      .modal-content .btn-dark-cancel, .modal-content .btn-secondary { background-color: var(--button-secondary-bg); color: var(--button-secondary-text); border: 1px solid #444; }
      .modal-content .btn-dark-cancel:hover, .modal-content .btn-secondary:hover { background-color: var(--button-secondary-hover-bg); border-color: #555; }
      .modal-actions-centered { margin-top: 1.5rem; display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }
      #viewMembershipModal .modal-content { max-width: 550px; text-align: center; }
      #viewMembershipModal h2 { font-size: 2.4rem; color: var(--main-color); margin-bottom: 1.5rem; text-align: center; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border-color-light); }
      #viewMembershipModal .status-details { margin-bottom: 2rem; text-align: center; }
      #viewMembershipModal .status-text { font-size: 1.7rem; margin-bottom: 0.8rem; color: var(--color-text-muted); }
      #viewMembershipModal .status-text .current-status, #viewMembershipModal .status-text .expiry-date { color: var(--text-color); font-weight: 600; }
      #viewMembershipModal .status-text .current-status { color: var(--color-gold-light); }
      #viewMembershipModal .status-note { font-size: 1.3rem; color: var(--color-text-muted); font-style: italic; margin-top: 1rem; }
      #viewMembershipModal .status-actions { display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap; margin-top: 2rem; }
      #viewMembershipModal .status-actions .btn { padding: 1rem 2.5rem; font-size: 1.5rem; flex: 1; min-width: 120px; margin: 0 5px; border-radius: 8px; }
      #viewMembershipModal .status-actions .btn.btn-primary:hover { box-shadow: 0 0 1.6rem var(--main-color); background-color: transparent; color: var(--main-color); } /* Unique hover */
      #viewMembershipModal .status-actions .btn.btn-secondary { background-color: transparent; color: var(--main-color); border-color: var(--main-color); }
      #viewMembershipModal .status-actions .btn.btn-secondary:hover { background-color: var(--main-color); color: var(--color-black); box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2); }
      #stopMembershipModal .modal-content { max-width: 450px; }
      #stopMembershipModal h3 { color: #d32f2f; font-size: 2rem; margin-bottom: 1.5rem; text-align:center; }
      #confirmStopMembershipBtn.btn-danger { background-color: #d32f2f; border-color: #d32f2f; color: white; }
      #confirmStopMembershipBtn.btn-danger:hover { background-color: #b71c1c; border-color: #b71c1c; color: white; box-shadow: 0 0 1rem rgba(183, 28, 28, 0.5); }
      #switchGymModal .modal-content, #requestRefundModal .modal-content { max-width: 480px; text-align: left; }
      #switchGymModal h3, #requestRefundModal h3, #confirmSwitchGymActionModal h3, #switchGymSuccessModal h3, #refundRequestSubmittedModal h3 { text-align: center; font-size: 2rem; color: var(--main-color); margin-bottom: 2rem; }
      #switchGymModal .form-group, #requestRefundModal .form-group { margin-bottom: 1.5rem; }
      .error-message { display: block; color: var(--error-color); font-size: 1.3rem; margin-top: 0.5rem; text-align: left; }
      #switchGymModal label, #requestRefundModal label { display: block; font-size: 1.5rem; color: var(--color-text-muted); margin-bottom: 0.8rem; font-weight: 500; }
      #switchGymModal select { width: 100%; padding: 1.2rem 1.5rem; font-size: 1.5rem; border-radius: 6px; border: 1px solid var(--input-border-color); background-color: var(--input-bg); color: var(--input-text-color); outline: none; appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23aaaaaa' class='bi bi-caret-down-fill' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 1.5rem center; background-size: 1em; cursor: pointer; }
      #switchGymModal select:focus { border-color: var(--input-focus-border-color); box-shadow: 0 0 0 2px var(--input-focus-shadow); }
      #switchGymModal select option { background-color: var(--input-bg); color: var(--input-text-color); }
      #switchGymModal .modal-actions { margin-top: 2rem; display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }
      #switchGymModal .modal-actions .btn { flex: 1; }
      #requestRefundModal textarea { width: 100%; padding: 1rem 1.2rem; font-size: 1.5rem; border-radius: 6px; border: 1px solid var(--input-border-color); background-color: var(--input-bg); color: var(--input-text-color); outline: none; min-height: 100px; resize: vertical; }
      #requestRefundModal textarea:focus { border-color: var(--input-focus-border-color); box-shadow: 0 0 0 2px var(--input-focus-shadow); }
      /* === END MODAL STYLES === */

      /* === FOOTER STYLES (Consistent) === */
      .subscribe-section { background-color: var(--snd-bf-color); padding: 4rem 0; border-top: 1px solid var(--border-color-light); margin-top: auto; }
      .subscribe-section .container.subscribe-content { max-width: 1200px; margin: 0 auto; padding: 0 2rem; display: grid; grid-template-columns: 1fr 1.5fr; gap: 3rem; align-items: start; }
      .subscribe-text h2 { font-size: 2.4rem; color: var(--main-color); margin-bottom: 1rem; text-align: left; }
      .subscribe-text p { font-size: 1.5rem; color: var(--color-text-muted); margin-bottom: 2rem; line-height: 1.7; }
      .subscribe-form { display: flex; gap: 1rem; margin-bottom: 2rem; }
      .subscribe-form input[type="email"] { flex-grow: 1; padding: 1.2rem 1.5rem; font-size: 1.5rem; border-radius: 6px; border: 1px solid var(--border-color-light); background-color: var(--color-dark-gray); color: var(--text-color); outline: none; }
      .subscribe-form input[type="email"]::placeholder { color: var(--color-text-muted); }
      .subscribe-form input[type="email"]:focus { border-color: var(--main-color); box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.2); }
      .subscribe-form button.btn-primary { padding: 1.2rem 2.5rem; font-size: 1.5rem; min-width: auto; border-radius: 6px; background-color: var(--button-primary-bg); color: var(--button-primary-text); border: 1px solid var(--main-color); cursor: pointer; }
      .subscribe-form button.btn-primary:hover { background-color: var(--button-primary-hover-bg); color: var(--main-color); border-color: var(--color-gold-light); } /* Using progress hover style */
      .social-icons { display: flex; gap: 1.5rem; }
      .social-icons a { color: var(--color-text-muted); font-size: 2.2rem; transition: color 0.3s ease, transform 0.3s ease; }
      .social-icons a:hover { color: var(--main-color); transform: translateY(-3px); }
      .footer-links { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 2rem; }
      .footer-links h4 { font-size: 1.6rem; color: var(--main-color); margin-bottom: 1rem; font-weight: 600; }
      .footer-links ul { list-style: none; padding: 0; margin: 0; }
      .footer-links li { margin-bottom: 0.8rem; }
      .footer-links a { font-size: 1.4rem; color: var(--color-text-muted); transition: color 0.3s ease; }
      .footer-links a:hover { color: var(--text-color); text-decoration: underline; }
      footer { background-color: var(--bg-color); color: var(--color-text-muted); text-align: center; padding: 2rem 0; font-size: 1.3rem; border-top: 1px solid var(--border-color-light); margin-top: 0; }
      footer .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
      /* === END FOOTER === */

      /* === RESPONSIVE STYLES (Combined & Adapted) === */
      @media (max-width: 1180px) {
          .gym-display { max-width: 95%; }
      }
      @media (max-width: 1024px) {
          .navbar-right img.profile-pic { width: 45px; height: 45px; margin-left: 0; margin-right: 0; }
          .navbar-right { gap: 1.5rem; }
          .welcome-text { font-size: 1.5rem; }
      }
      @media (max-width: 991px) {
          html { font-size: 55%; }
          header { height: var(--header-height-mobile); padding: 1rem 5%; }
          main { padding-top: var(--header-height-mobile); }
          #menu-icon { display: block; }
          .logo img { max-width: 100px; }
          .navbar { position: absolute; top: 100%; right: -100%; width: 250px; background: var(--color-black); flex-direction: column; align-items: center; padding: 2rem; transition: right .50s ease; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4); border-radius: 0 0 10px 10px; justify-content: flex-start; flex-grow: 0; margin-left: 0; height: auto; overflow-y: visible; border-top: none; }
          .navbar.active { right: 5%; display: flex; }
          .navbar-left, .navbar-right { flex-direction: column; width: 100%; align-items: center; gap: 0; }
          .navbar-right { margin-top: 1.5rem; gap: 1.5rem; }
          .navbar li { width: 100%; text-align: center; margin-bottom: 1.5rem; }
          .navbar-right li { margin-bottom: 0; }
          .navbar a { display: block; margin: 0 !important; padding: 1rem 0; font-size: 2rem; text-align: center; border-bottom: none; }
          .navbar a:hover, .navbar a.active { color: var(--main-color); border-bottom: none; }
          .navbar .profile-pic { margin: 0 auto 1rem auto; }
          .profile-menu-container { position: static; width: 100%; margin-bottom: 1rem; }
          .profile-dropdown { position: static; display: block; width: 100%; margin-top: 0.5rem; margin-bottom: 0; box-shadow: none; border: none; border-top: 1px solid var(--border-color-light); border-bottom: 1px solid var(--border-color-light); border-radius: 0; background-color: transparent; padding: 0; animation: none; }
          .profile-dropdown li a.dropdown-item { text-align: center; padding: 1rem 1.5rem; font-size: 1.6rem; border-bottom: 1px solid var(--border-color-light); }
          .profile-dropdown li:last-child a.dropdown-item { border-bottom: none; }
          .profile-dropdown li a.dropdown-item:hover { background-color: var(--color-dark-gray); }
          .welcome-text { margin-bottom: 1rem; text-align: center; font-size: 1.6rem; width: auto; padding: 0; border-bottom: none; }
          .navbar-right li a#logout-link { margin-top: 0.5rem; width: auto; padding: 1rem 0; justify-content: center; }
          .gym-display { flex-direction: column-reverse; text-align: center; gap: 2.5rem; padding: 3rem 2rem; max-width: 90%; }
          main > section.gym-display:first-of-type { margin-top: 3rem; }
          .gym-content { max-width: 100%; align-items: center; }
          .gym-image { max-width: 75%; margin-bottom: 1.5rem; }
          .gym-content h1 { font-size: 3.2rem; }
          .gym-content p { font-size: 1.5rem; }
          .subscribe-content { grid-template-columns: 1fr; gap: 2rem; }
          .subscribe-text{ text-align: center; }
          .subscribe-form { justify-content: center; }
          .social-icons { justify-content: center; }
          .footer-links { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); text-align: center;}
          .modal-content { width: 90%; }
          #viewMembershipModal .modal-content { width: 90%; max-width: 550px; } /* Ensure view membership still works */
      }
      @media (max-width: 767px) {
          html { font-size: 50%; }
          header { height: calc(var(--header-height-mobile) - 10px); padding: 1rem 4%; }
          main { padding-top: calc(var(--header-height-mobile) - 10px); }
          .logo img { max-width: 150px; }
          .gym-content h1 { font-size: 2.8rem; }
          .gym-content p { font-size: 1.4rem; }
          .gym-content .action-button { font-size: 1.5rem; padding: 1.1rem 2.8rem; }
          .gym-image { max-width: 85%; }
          .gym-display { padding: 2.5rem 1.5rem; max-width: 92%; }
          main > section.gym-display:not(:last-of-type) { margin-bottom: 2.5rem; }
          .subscribe-form { flex-direction: column; align-items: stretch; }
          .subscribe-form button.btn-primary { width: 100%; }
          .footer-links { text-align: center;}
          .modal-content { padding: 1.5rem; max-width: 95%; }
          .modal-content p, .modal-content #logoutModalMessage, .modal-content #stopModalMessage, .modal-content #refundModalMessage, .modal-content #confirmSwitchGymActionModalMessage, .modal-content #switchGymSuccessModalMessage, .modal-content #refundRequestSubmittedModalMessage, .modal-content #alertModalMessage { font-size: 1.4rem; }
          #viewMembershipModal .modal-content { width: 90%; max-width: 95%; }
          #viewMembershipModal .status-actions { flex-direction: column; align-items: stretch; gap: 1rem; }
          #viewMembershipModal .status-actions .btn { width: 100%; min-width: unset; }
          .modal-actions-centered .btn { width: 100%; }
      }
       @media (max-width: 480px) {
          header { height: calc(var(--header-height-mobile) - 20px); padding: 0.8rem 3%; }
          main { padding-top: calc(var(--header-height-mobile) - 20px); }
          .logo img { max-width: 130px; }
          .gym-content h1 { font-size: 2.4rem; }
          .gym-content p { font-size: 1.3rem; }
          .gym-content .action-button { font-size: 1.4rem; padding: 1rem 2.2rem; width: 90%; max-width: 280px; }
          .gym-image { max-width: 90%; }
          .gym-display { padding: 2rem 1rem; max-width: 95%; }
          main > section.gym-display:not(:last-of-type) { margin-bottom: 2rem; }
          .footer-links { grid-template-columns: repeat(2, 1fr); }
          .modal-content .modal-actions button, .modal-content #cancelLogoutButton, .modal-content #okLogoutButton, .modal-content #alertModalOkButton, .modal-actions-centered .btn { font-size: 1.3rem; padding: 0.8rem 1.5rem; min-width: 90px; width: 100%; margin-bottom: 0.5rem; }
          .modal-actions-centered .btn:last-child { margin-bottom: 0; }
          #logoutModalMessage, #stopModalMessage, #refundModalMessage, #confirmSwitchGymActionModalMessage, #switchGymSuccessModalMessage, #refundRequestSubmittedModalMessage, #alertModalMessage { font-size: 1.4rem; }
          .modal-content .close-button, .modal-content .modal-close-btn { font-size: 2.2rem; top: 0.8rem; right: 1rem;}
       }
      /* === END RESPONSIVE === */
    </style>
</head>
<body>

    <!-- Consistent Header -->
    <header>
        <a href="home.html" class="logo"><img src="../images/logo.png" alt="OptiLife Logo"></a>
        <div class='bx bx-menu' id="menu-icon"></div>
        <ul class="navbar">
             <div class="navbar-left">
                 <li><a href="home.html" class="active">Home</a></li>
                 <li><a href="setGoals.html">Set Goals</a></li>
                 <li><a href="progress.html">Track Progress</a></li>
                 <li><a href="membership.html">Membership</a></li>
             </div>
             <div class="navbar-right">
                <li class="profile-menu-container">
                     <img src="../images/user_pic.jpg" alt="User Profile" class="profile-pic" id="profilePicTrigger">
                     <ul class="profile-dropdown" id="profileDropdown">
                         <li>
                             <a href="#" id="view-membership-link" class="dropdown-item"> <!-- Use # for modal trigger -->
                                 <i class='bx bx-id-card'></i> View Membership
                             </a>
                         </li>
                         <li>
                             <a href="#" id="request-refund-link" class="dropdown-item">
                                 <i class='bx bx-revision'></i> Request Refund
                             </a>
                         </li>
                         <li>
                             <a href="#" id="switch-gym-link" class="dropdown-item">
                                 <i class='bx bx-transfer-alt'></i> Switch Gym
                             </a>
                         </li>
                     </ul>
                 </li>
                 <li>
                     <span class="welcome-text">Welcome, <span id="header-user-name">User</span>!</span>
                 </li>
                 <li>
                     <a href="signin.html" id="logout-link">
                         <i class='bx bx-log-out'></i>
                         Logout
                     </a>
                 </li>
             </div>
        </ul>
    </header>
    <!-- End Header -->

    <main>
        <!-- Original Home Page Content Sections -->
        <section class="gym-display">
            <div class="gym-content">
                <h1>Welcome to <span>Elite Fitness Hub</span></h1>
                <p>
                    Your premier destination for achieving peak physical condition. We offer state-of-the-art equipment, expert personal trainers,
                    a wide variety of group classes, and a motivating community atmosphere. Whether you're a beginner or a seasoned athlete,
                    Elite Fitness Hub provides the resources and support you need to crush your goals. Join us and transform your life!
                </p>
                <a href="membership.html" class="btn-primary action-button">Apply Now</a>
            </div>
            <div class="gym-image">
                <img src="../images/gymcorp2.webp" alt="Interior of Elite Fitness Hub">
            </div>
        </section>
        <section class="gym-display">
            <div class="gym-content">
                <h1>Welcome to <span>Iron Haven</span></h1>
                <p>
                    Welcome to Iron Haven—the ultimate destination for strength training purists. Designed for serious athletes, powerlifters, and bodybuilders, this gym offers a raw and focused atmosphere with top-tier equipment, from Olympic-grade platforms and free weights to resistance machines and sled tracks. Iron Haven isn’t about frills or fluff—it’s about grit, dedication, and building raw power. Whether you're chasing a new PR or just love the clang of iron, this is your sanctuary of steel.
                </p>
                <a href="membership.html" class="btn-primary action-button">Apply Now</a>
            </div>
            <div class="gym-image">
                <img src="../images/gymcorp3.jpg" alt="Interior of Iron Haven">
            </div>
        </section>
        <section class="gym-display">
            <div class="gym-content">
                <h1>Welcome to <span>Elevate Athletics</span></h1>
                <p>
                    Redefining the fitness experience, Elevate Athletics is a premium, all-in-one training destination designed for those who demand more. With state-of-the-art equipment, spa-like amenities, and a comprehensive class schedule—including strength, HIIT, yoga, and Pilates—Elevate delivers a luxury wellness experience without compromise. Whether you’re chasing peak performance or seeking a balanced lifestyle, Elevate Athletics empowers you to train with purpose, recover with intention, and live at your highest level.
                </p>
                <a href="membership.html" class="btn-primary action-button">Apply Now</a>
            </div>
            <div class="gym-image">
                <img src="../images/gymcorp4.jpg" alt="Interior of Elevate Athletics">
            </div>
        </section>
        <!-- End Original Home Page Content -->
    </main>

    <!-- Consistent Footer -->
    <section id="subscribe" class="subscribe-section">
        <div class="container subscribe-content">
             <div class="subscribe-text">
                <h2>Subscribe</h2>
                <p>Join our fitness family and get tips, exclusive updates, and special offers. Start your journey today!</p>
                <form class="subscribe-form" id="subscribeForm"> <!-- Added ID -->
                    <input type="email" id="subscribeEmail" placeholder="Email" required> <!-- Added ID -->
                    <button type="submit" class="btn-primary">Send</button>
                </form>
                <div class="social-icons">
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-links">
                 <div><h4>Company</h4><ul><li><a href="#">Press</a></li><li><a href="#">Blog</a></li><li><a href="#">About</a></li><li><a href="#">Careers</a></li></ul></div>
                 <div><h4>Services</h4><ul><li><a href="#">Training</a></li><li><a href="#">Nutrition</a></li><li><a href="#">Lifestyles</a></li></ul></div>
                 <div><h4>Legal</h4><ul><li><a href="#">Policy</a></li><li><a href="#">Privacy & Cookies</a></li><li><a href="#">Terms & Conditions</a></li></ul></div>
                 <div><h4>Community</h4><ul><li><a href="#">Contact</a></li><li><a href="#">Find a club</a></li><li><a href="#">Membership</a></li></ul></div>
                 <div><h4>Gym</h4><ul><li><a href="#">Book a Gym</a></li><li><a href="#">Find a Gym</a></li></ul></div>
                 <div>
                    <h4>System Developed By</h4>
                    <ul>
                        <li><a href="#">Sintoy, Joebert</a></li>
                        <li><a href="#">Paliqueron, Khem</a></li>
                        <li><a href="#">Iglesia, Jose</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    <footer>
        <div class="container">
            <p>© 2024 OPTILIFE. All Rights Reserved.</p>
        </div>
    </footer>
    <!-- End Footer -->

    <!-- ADDED MODALS -->
    <!-- Logout Confirmation Modal -->
    <div id="logoutConfirmationModal" class="modal">
        <div class="modal-content">
            <button id="closeLogoutModalButton" class="close-button" aria-label="Close modal">×</button>
            <p id="logoutModalMessage">Are you sure you want to logout?</p>
            <div class="modal-actions">
                 <button id="cancelLogoutButton" class="btn-secondary">Cancel</button>
                 <button id="okLogoutButton" class="btn-primary">Logout</button>
            </div>
        </div>
    </div>
    <!-- View Membership Modal -->
    <div id="viewMembershipModal" class="modal">
        <div class="modal-content">
            <button id="closeViewMembershipModalButton" class="modal-close-btn" aria-label="Close modal">×</button>
            <h2>Your Current Membership</h2>
            <div class="status-details">
                <p class="status-text"> Plan: <span class="current-status" id="modal-user-membership-plan">Premium</span> </p>
                <p class="status-text"> Expires: <span class="expiry-date" id="modal-user-membership-expiry">March 15, 2025</span> </p>
                <p class="status-note"> Manage your subscription below. Extending adds time to your current expiry date. </p>
            </div>
            <div class="status-actions">
                <a href="paymentMethods.html?action=extend" id="modal-extend-membership-link" class="btn btn-primary">Extend Membership</a>
                <button type="button" id="modal-stop-membership-button" class="btn btn-secondary">Stop Membership</button>
            </div>
        </div>
    </div>
    <!-- Stop Membership Confirmation Modal -->
    <div id="stopMembershipModal" class="modal">
        <div class="modal-content">
            <button id="closeStopModalButton" class="modal-close-btn" aria-label="Close modal">×</button>
            <h3>Confirm Membership Cancellation</h3>
            <p id="stopModalMessage">Are you sure you want to stop your membership at the end of the current period? This action cannot be undone easily.</p>
            <div class="modal-actions-centered">
                 <button id="cancelStopMembershipBtn" class="btn btn-dark-cancel">Keep Membership</button>
                 <button id="confirmStopMembershipBtn" class="btn btn-primary btn-danger">Confirm Stop</button>
            </div>
        </div>
    </div>
    <!-- Request Refund Modal -->
    <div id="requestRefundModal" class="modal">
        <div class="modal-content">
            <button id="closeRequestRefundModalButton" class="modal-close-btn" aria-label="Close modal">×</button>
            <h3>Request a Refund</h3>
            <form id="requestRefundForm">
                <div class="form-group">
                    <label for="refund-reason">Reason for Refund:</label>
                    <textarea id="refund-reason" name="refundReason" placeholder="Please explain why you are requesting a refund..."></textarea>
                    <span class="error-message" id="refund-reason-error"></span>
                </div>
                <div class="modal-actions-centered">
                    <button type="button" id="cancelRefundRequestBtn" class="btn btn-dark-cancel">Cancel</button>
                    <button type="submit" id="submitRefundRequestBtn" class="btn btn-primary">Submit Request</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Refund Request Submitted Modal -->
    <div id="refundRequestSubmittedModal" class="modal">
      <div class="modal-content">
          <button id="closeRefundRequestSubmittedModalButton" class="modal-close-btn" aria-label="Close modal">×</button>
          <h3>Refund Request Submitted</h3>
          <p id="refundRequestSubmittedModalMessage"> Your refund request has been submitted. We will review it and get back to you soon. </p>
          <div class="modal-actions-centered"> <button id="okRefundSubmittedButton" class="btn btn-primary">OK</button> </div>
      </div>
    </div>
    <!-- Switch Gym Modal (Form) -->
    <div id="switchGymModal" class="modal">
        <div class="modal-content">
            <button id="closeSwitchGymModalButton" class="modal-close-btn" aria-label="Close modal">×</button>
            <h3>Switch Your Gym</h3>
            <form id="switchGymForm">
                <div class="form-group">
                    <label for="gym-select">Select Gym:</label>
                    <select id="gym-select" name="gym">
                        <option value="">-- Select Gym Name --</option> <option value="near">Gym Near You (Autodetect)</option> <option value="elite">Elite Fitness Hub</option> <option value="iron">Iron Haven</option> <option value="elevate">Elevate Athletics</option>
                    </select>
                    <span class="error-message" id="gym-select-error"></span>
                </div>
                <div class="form-group">
                    <label for="location-select">Select Location (if not autodetected):</label>
                    <select id="location-select" name="location">
                        <option value="">-- Select Location --</option> <option value="boulder">1760 Pearl Street, Boulder, CO 80302, USA</option> <option value="manchester">52 Portland Street, Manchester M1 4QU, United Kingdom</option> <option value="qc">102 Timog Avenue, Barangay Sacred Heart, Quezon City, Metro Manila 1103, Philippines</option>
                    </select>
                    <span class="error-message" id="location-select-error"></span>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancelSwitchGymBtn" class="btn btn-dark-cancel">Cancel</button>
                    <button type="submit" id="confirmSwitchGymBtn" class="btn btn-primary">Confirm Switch</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Confirm Switch Gym Action Modal -->
    <div id="confirmSwitchGymActionModal" class="modal">
        <div class="modal-content">
            <button id="closeConfirmSwitchGymActionModalButton" class="modal-close-btn" aria-label="Close modal">×</button>
            <h3>Confirm Gym Switch</h3>
            <p id="confirmSwitchGymActionModalMessage"> You are about to switch to: <strong id="confirmGymNameText"></strong> at location: <strong id="confirmGymLocationText"></strong> Are you sure you want to proceed? </p>
            <div class="modal-actions-centered">
                <button type="button" id="cancelSwitchGymActionBtn" class="btn btn-dark-cancel">Cancel</button>
                <button type="button" id="confirmSwitchGymActionActualBtn" class="btn btn-primary">Yes, Switch Gym</button>
            </div>
        </div>
    </div>
    <!-- Switch Gym Success Modal -->
    <div id="switchGymSuccessModal" class="modal">
        <div class="modal-content">
            <button id="closeSwitchGymSuccessModalButton" class="modal-close-btn" aria-label="Close modal">×</button>
            <h3>Switch Successful</h3>
            <p id="switchGymSuccessModalMessage"> Your gym switch request has been submitted. </p>
            <div class="modal-actions-centered"> <button type="button" id="okSwitchGymSuccessBtn" class="btn btn-primary">OK</button> </div>
        </div>
    </div>
    <!-- END Added Modals -->


    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script> <!-- Moment required for loadMembershipStatus -->
    <script>
        $(document).ready(function() {
            // === Header, Profile Dropdown, Logout Modal JS (Combined from Progress/Membership) ===
            var menuIcon = $('#menu-icon');
            var navbar = $('.navbar');
            var logoutLink = $('#logout-link');
            var logoutModal = $('#logoutConfirmationModal');
            const $profilePicTrigger = $('#profilePicTrigger');
            const $profileDropdown = $('#profileDropdown');

            // New Modal Triggers from profile dropdown
            const $viewMembershipLink = $('#view-membership-link');
            const $requestRefundLink = $('#request-refund-link');
            const $switchGymLink = $('#switch-gym-link');

            // New Modal Elements
            const $viewMembershipModal = $('#viewMembershipModal');
            const $modalStopMembershipButton = $('#modal-stop-membership-button');
            const $stopMembershipModal = $('#stopMembershipModal');
            const $requestRefundModal = $('#requestRefundModal');
            const $refundRequestSubmittedModal = $('#refundRequestSubmittedModal');
            const $switchGymModal = $('#switchGymModal');
            const $confirmSwitchGymActionModal = $('#confirmSwitchGymActionModal');
            const $switchGymSuccessModal = $('#switchGymSuccessModal');
            // Alert Modal (Optional, if needed beyond form validation)
            // const $alertModal = $('#alertModal');
            // const $alertModalMessage = $('#alertModalMessage');

            function closeOverlays() {
                if ($profileDropdown.hasClass('active')) { $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active'); }
                if (navbar.hasClass('active') && $(window).width() <= 991) { navbar.removeClass('active'); menuIcon.removeClass('bx-x'); }
            }

            if (menuIcon.length && navbar.length) {
                menuIcon.on('click', function() {
                    $(this).toggleClass('bx-x'); navbar.toggleClass('active');
                    if ($profileDropdown.hasClass('active') && $(window).width() > 991) { $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active'); }
                });
                $(window).on('scroll', function() { closeOverlays(); });
            }

            if ($profilePicTrigger.length && $profileDropdown.length) {
                $profilePicTrigger.on('click', function(event) {
                    event.stopPropagation(); $profileDropdown.toggleClass('active'); $profilePicTrigger.toggleClass('active');
                    if (navbar.hasClass('active') && $(window).width() > 991) { navbar.removeClass('active'); menuIcon.removeClass('bx-x'); }
                });
                $(document).on('click', function(event) {
                    if (!$profileDropdown.is(event.target) && $profileDropdown.has(event.target).length === 0 && !$profilePicTrigger.is(event.target)) {
                        if ($profileDropdown.hasClass('active')) { $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active'); }
                    }
                });
            }

            navbar.on('click', 'a', function(event) {
                const $clickedLink = $(this);
                const isModalTrigger = $clickedLink.is($viewMembershipLink) || $clickedLink.is($requestRefundLink) || $clickedLink.is($switchGymLink);
                if ($clickedLink.is($profilePicTrigger)) { return; }
                if (isModalTrigger && $clickedLink.attr('href') === '#') { event.preventDefault(); }
                if (navbar.hasClass('active') && $(window).width() <= 991) {
                    navbar.removeClass('active'); menuIcon.removeClass('bx-x');
                    if ($profileDropdown.hasClass('active')) { $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active'); }
                } else if ($profileDropdown.hasClass('active') && $clickedLink.closest($profileDropdown).length) {
                    $profileDropdown.removeClass('active'); $profilePicTrigger.removeClass('active');
                }
            });

            // --- View Membership Modal Logic ---
            if ($viewMembershipLink.length && $viewMembershipModal.length) {
                $viewMembershipLink.on('click', function(event) { event.preventDefault(); closeOverlays(); loadMembershipStatus(); $viewMembershipModal.addClass('active'); });
                $viewMembershipModal.on('click', '#closeViewMembershipModalButton', function() { $viewMembershipModal.removeClass('active'); });
                if ($modalStopMembershipButton.length && $stopMembershipModal.length) {
                    $modalStopMembershipButton.on('click', function() { $viewMembershipModal.removeClass('active'); $stopMembershipModal.addClass('active'); });
                }
            }
            if ($stopMembershipModal.length) {
                $stopMembershipModal.on('click', '#closeStopModalButton, #cancelStopMembershipBtn', function() { $stopMembershipModal.removeClass('active'); });
                $('#confirmStopMembershipBtn').on('click', function() { console.log("Membership stop confirmed (placeholder action)"); alert("Your request to stop the membership has been processed (placeholder)."); $stopMembershipModal.removeClass('active'); });
            }

            // --- Request Refund Modal Logic ---
            if ($requestRefundLink.length && $requestRefundModal.length && $refundRequestSubmittedModal.length) {
                $requestRefundLink.on('click', function(event) { event.preventDefault(); closeOverlays(); $('#requestRefundForm')[0].reset(); $('#refund-reason-error').text(''); $requestRefundModal.addClass('active'); });
                $requestRefundModal.on('click', '#closeRequestRefundModalButton, #cancelRefundRequestBtn', function() { $requestRefundModal.removeClass('active'); });
                $('#requestRefundForm').on('submit', function(event) {
                    event.preventDefault(); const reason = $('#refund-reason').val().trim(); const $reasonError = $('#refund-reason-error'); $reasonError.text('');
                    if (!reason) { $reasonError.text('Please enter a reason for your refund request.'); return; }
                    console.log("Refund Request Submitted. Reason:", reason); $requestRefundModal.removeClass('active'); $refundRequestSubmittedModal.addClass('active');
                });
                $refundRequestSubmittedModal.on('click', '#closeRefundRequestSubmittedModalButton, #okRefundSubmittedButton', function() { $refundRequestSubmittedModal.removeClass('active'); });
            }

            // --- Switch Gym Modals Logic ---
            if ($switchGymLink.length && $switchGymModal.length && $confirmSwitchGymActionModal.length && $switchGymSuccessModal.length) {
                $switchGymLink.on('click', function(event) { event.preventDefault(); closeOverlays(); $('#switchGymForm')[0].reset(); $('#gym-select-error, #location-select-error').text(''); $switchGymModal.addClass('active'); });
                $switchGymModal.on('click', '#closeSwitchGymModalButton, #cancelSwitchGymBtn', function() { $switchGymModal.removeClass('active'); });
                $('#switchGymForm').on('submit', function(event) {
                    event.preventDefault(); const selectedGymValue = $('#gym-select').val(); const selectedGymText = $('#gym-select option:selected').text(); const selectedLocationValue = $('#location-select').val(); const selectedLocationText = $('#location-select option:selected').text(); const $gymError = $('#gym-select-error'); const $locationError = $('#location-select-error'); let isValid = true; $gymError.text(''); $locationError.text('');
                    if (!selectedGymValue) { $gymError.text('Please select a gym.'); isValid = false; }
                    if (selectedGymValue !== "near" && !selectedLocationValue) { $locationError.text('Please select a location.'); isValid = false; }
                    if (!isValid) return; $('#confirmGymNameText').text(selectedGymText); $('#confirmGymLocationText').text(selectedLocationValue ? selectedLocationText : (selectedGymValue === "near" ? "Autodetected" : "N/A")); $switchGymModal.removeClass('active'); $confirmSwitchGymActionModal.addClass('active');
                });
                $confirmSwitchGymActionModal.on('click', '#closeConfirmSwitchGymActionModalButton, #cancelSwitchGymActionBtn', function() { $confirmSwitchGymActionModal.removeClass('active'); });
                $('#confirmSwitchGymActionActualBtn').on('click', function() {
                    const gymText = $('#confirmGymNameText').text(); const locationText = $('#confirmGymLocationText').text(); console.log("Switch Gym Confirmed. Gym:", gymText, "Location:", locationText);
                    $confirmSwitchGymActionModal.removeClass('active'); $('#switchGymSuccessModalMessage').html(`Your gym switch request to <strong>${gymText}</strong> (Location: <strong>${locationText}</strong>) has been submitted.`); $switchGymSuccessModal.addClass('active'); $('#switchGymForm')[0].reset();
                });
                $switchGymSuccessModal.on('click', '#closeSwitchGymSuccessModalButton, #okSwitchGymSuccessBtn', function() { $switchGymSuccessModal.removeClass('active'); });
            }

            // --- Logout Modal Logic ---
            if (logoutLink.length && logoutModal.length) {
                logoutLink.on('click', function(event) { event.preventDefault(); closeOverlays(); logoutModal.addClass('active'); });
                logoutModal.on('click', '.close-button, #cancelLogoutButton', function() { logoutModal.removeClass('active'); }); // Used .close-button
                $('#okLogoutButton').on('click', function() { logoutModal.removeClass('active'); window.location.href = logoutLink.attr('href'); });
            }

             // --- Generic Modal Close on Overlay Click ---
             $(window).on('click', function(e) {
                 if ($(e.target).is('.modal') && $(e.target).hasClass('active')) {
                     $(e.target).removeClass('active');
                 }
             });

            // --- Load User Info ---
            function loadUserName() { let userName = "Han Soyoung"; $('#header-user-name').text(userName); }
            loadUserName();

            function loadMembershipStatus() { // For View Membership Modal
                let userName = "Han Soyoung"; $('#header-user-name').text(userName);
                const userPlan = "Premium"; const expiryDate = "2025-03-15";
                $('#modal-user-membership-plan').text(userPlan);
                $('#modal-user-membership-expiry').text(moment(expiryDate).format('MMMM D, YYYY'));
            }
            // loadMembershipStatus() is called only when the modal is opened via its trigger.

            // --- Footer Subscribe Form ---
            $('#subscribeForm').on('submit', function(e){
              e.preventDefault(); const email = $('#subscribeEmail').val();
              alert(`Subscribed with ${email}! (Demo)`); // Simple alert for demo
              $('#subscribeEmail').val('');
            });

        });
    </script>

</body>
</html>
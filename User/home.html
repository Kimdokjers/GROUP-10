<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <title>Home Page - OptiLife</title>
    <link rel="stylesheet" href="../User/usercss/home.css">
</head>
<body>
    <header>
        <a href="#home" class="logo"><img src="../images/logo.png" alt="OptiLife Logo"></a>
        <div class='bx bx-menu' id="menu-icon"></div>
        <ul class="navbar">
            <div class="navbar-left">
                <li><a href="#home" class="active">Home</a></li>
                <li><a href="setGoals.html">Set Goals</a></li>
                <li><a href="progress.html">Track Progress</a></li>
                <li><a href="membership.html">Membership</a></li>
            </div>
            <div class="navbar-right">
                <li>
                    <img id="profilePicTrigger" src="../images/user_pic.jpg" alt="User Profile" class="profile-pic">
                </li>
                <li>
                    <a href="signin.html" id="logout-link">Logout</a>
                </li>
            </div>
        </ul>
    </header>

    <main>
        <section class="gym-search-section">
            <div class="gym-search-container">
                 <form id="gym-search-form" onsubmit="return false;">
                     <input type="search" id="gym-search-input" placeholder="Find Your Gym (e.g., Apex, Ironclad)...">
                     <button type="button" id="gym-search-button">
                         <i class='bx bx-search'></i> Search
                     </button>
                 </form>
            </div>
        </section>

        <section class="home" id="home">
            <div class="home-content">
                <h1><span>Apex Athletics</span></h1>
                <p>This is more than a gym it’s your launchpad to a stronger, fitter, and more confident you. From cutting-edge equipment to dynamic group classes and one-on-one coaching, we’re here to help you crush your goals and build a lifestyle you’re proud of.</p>
                <a href="membership.html" class="btn">Apply Now</a>
            </div>
            <div class="home-img">
                <img src="../images/gymcorp3.jpg" alt="Apex Athletics Gym">
            </div>
        </section>
        <section class="home" id="home-ironclad">
            <div class="home-content">
                <h1><span>Ironclad Fitness</span></h1>
                <p> Step into a space where your goals become reality. Whether you're aiming to build muscle, burn fat, or simply lead a healthier lifestyle, Elevate Fitness is your ultimate destination. With state-of-the-art equipment, expert trainers, and a motivating community, you'll not only transform your body but your mindset too.</p>
                <a href="membership.html" class="btn">Apply Now</a>
            </div>
            <div class="home-img">
                <img src="../images/gymcorp2.webp" alt="Ironclad Fitness Gym">
            </div>
        </section>
    </main>

     <section id="subscribe" class="subscribe-section">
        <div class="container subscribe-content">
             <div class="subscribe-text">
                <h2>Subscribe</h2>
                <p>Join our fitness family and get tips, exclusive updates, and special offers. Start your journey today!</p>
                <form class="subscribe-form" onsubmit="alert('Subscription submitted (placeholder)!'); return false;">
                    <input type="email" placeholder="Email" required>
                    <button type="submit" class="btn-primary">Send</button>
                </form>
                <div class="social-icons">
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-links">
                 <div><h4>Company</h4><ul><li><a href="#">Press</a></li><li><a href="#">Blog</a></li><li><a href="#">About</a></li><li><a href="#">Careers</a></li></ul></div> <div><h4>Services</h4><ul><li><a href="#">Training</a></li><li><a href="#">Nutrition</a></li><li><a href="#">Lifestyles</a></li></ul></div> <div><h4>Legal</h4><ul><li><a href="#">Policy</a></li><li><a href="#">Privacy & Cookies</a></li><li><a href="#">Terms & Conditions</a></li></ul></div> <div><h4>Community</h4><ul><li><a href="#">Contact</a></li><li><a href="#">Find a club</a></li><li><a href="#">Membership</a></li></ul></div> <div><h4>Gym</h4><ul><li><a href="#">Book a Gym</a></li><li><a href="#">Find a Gym</a></li></ul></div>
            </div>
        </div>
    </section>

    <div id="userModal" class="modal">
        <div class="modal-content">
            <button id="closeUserModalButton" class="close-button">×</button>
            <h2 style="color: #000; margin-bottom: 15px;">User Profile</h2>
            <div style="display: flex; flex-direction: row; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px;">
                <img src="../images/user_pic.jpg" alt="User Profile" class="profile-pic" style="width: 60px; height: 60px; border-radius: 50%; margin-right: 15px;">
                <h2 style="color: #000; font-size: 2rem;">Safari Hoegan</h2>
            </div>
            <div class="profile-content">
                <div class="profile-info">
                    <p>Username:</p>
                    <p>User</p>
                </div>
                <div class="profile-info">
                    <p>Contact No.:</p>
                    <p>09403449746</p>
                </div>
                <div class="profile-info">
                    <p>Email:</p>
                    <p>user@gmail.com</p>
                </div>
                <div class="profile-info">
                    <p>Password:</p>
                    <p>********</p>
                </div>
                <div class="profile-info">
                    <p>First Name:</p>
                    <p>Safari</p>
                </div>
                <div class="profile-info">
                    <p>Last Name:</p>
                    <p>Hoegan</p>
                </div>
                <div class="profile-info">
                    <p>Suffix:</p>
                    <p>None</p>
                </div>
                <div class="profile-info">
                    <p>Birth Date:</p>
                    <p>01/01/2002</p>
                </div>
                <div class="profile-info">
                    <p>Address:</p>
                    <p>Zamboanga City</p>
                </div>
            </div>
        </div>
    </div>

    <div id="logoutConfirmationModal" class="modal">
        <div class="modal-content">
            <button id="closeLogoutModalButton" class="close-button">×</button>
            <p id="logoutModalMessage" style="color: #000; font-size: 1.8rem; margin-bottom: 25px; text-align: center;">Are you sure you want to logout?</p>
            <div style="text-align: center;">
                 <button id="cancelLogoutButton" class="btn-secondary" style="margin-right: 15px;">Cancel</button>
                 <button id="okLogoutButton" class="btn-primary">Logout</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>© 2024 OPTILIFE. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script>
        $(document).ready(function() {
            const $menuIcon = $('#menu-icon');
            const $navbar = $('.navbar');
            const $userProfileModal = $('#userModal');
            const $profilePicTrigger = $('#profilePicTrigger');
            const $closeUserModalButton = $('#closeUserModalButton');
            const $logoutModal = $('#logoutConfirmationModal');
            const $logoutLink = $('#logout-link');
            const $closeLogoutModalButton = $('#closeLogoutModalButton');
            const $cancelLogoutButton = $('#cancelLogoutButton');
            const $okLogoutButton = $('#okLogoutButton');
            let logoutUrl = '';

            if ($menuIcon.length && $navbar.length) {
                $menuIcon.on('click', () => {
                    $menuIcon.toggleClass('bx-x');
                    $navbar.toggleClass('active');
                });

                $(window).on('scroll', () => {
                     if ($navbar.hasClass('active')) {
                        $menuIcon.removeClass('bx-x');
                        $navbar.removeClass('active');
                    }
                });

                $navbar.find('a').not('#logout-link').not($profilePicTrigger).each(function() {
                    $(this).on('click', () => {
                         if ($navbar.hasClass('active')) {
                            $menuIcon.removeClass('bx-x');
                            $navbar.removeClass('active');
                         }
                     });
                 });

                 let profileLi = $navbar.find('li:has(.profile-pic)');
                 if(profileLi.length) {
                     profileLi.on('click', (e) => {
                          if($navbar.hasClass('active')) {
                             $menuIcon.removeClass('bx-x');
                             $navbar.removeClass('active');
                         }
                     });
                 }
            }

            const openUserProfileModal = () => $userProfileModal.addClass('show');
            const closeUserProfileModal = () => $userProfileModal.removeClass('show');

            if ($profilePicTrigger.length && $userProfileModal.length) {
                $profilePicTrigger.on('click', openUserProfileModal);
            } else {
                console.error("Profile picture trigger or modal not found!");
            }

            if ($closeUserModalButton.length) {
                $closeUserModalButton.on('click', closeUserProfileModal);
            }

            $userProfileModal.on('click', (event) => {
                if ($(event.target).is($userProfileModal)) {
                    closeUserProfileModal();
                }
            });

            const openLogoutModal = () => $logoutModal.addClass('show');
            const closeLogoutModal = () => $logoutModal.removeClass('show');

            $logoutLink.on('click', function(event) {
                event.preventDefault();
                logoutUrl = $(this).attr('href');
                openLogoutModal();
            });

            $closeLogoutModalButton.on('click', closeLogoutModal);
            $cancelLogoutButton.on('click', closeLogoutModal);

            $okLogoutButton.on('click', function() {
                 if ($navbar.hasClass('active')) {
                     $menuIcon.removeClass('bx-x');
                     $navbar.removeClass('active');
                 }
                 if(logoutUrl) {
                    window.location.href = logoutUrl;
                 } else {
                    console.error("Logout URL not set!");
                    closeLogoutModal();
                 }
            });

            $logoutModal.on('click', (event) => {
                if ($(event.target).is($logoutModal)) {
                    closeLogoutModal();
                }
            });

            $(document).on('keydown', (event) => {
                if (event.key === 'Escape') {
                    if ($userProfileModal.hasClass('show')) {
                        closeUserProfileModal();
                    }
                    if ($logoutModal.hasClass('show')) {
                        closeLogoutModal();
                    }
                }
            });


             $('a[href*="#"]').not('[href="#"]').not('[href="#0"]').not('#logout-link').on('click', function(event) {
                if (
                    location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '')
                    &&
                    location.hostname == this.hostname
                ) {
                    var target = $(this.hash);
                    target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                    if (target.length) {
                        event.preventDefault();
                        var headerHeight = $('header').outerHeight() || ( $(window).width() <= 991 ? parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-height-mobile')) : parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-height-desktop')) );
                        var scrollToPosition = target.offset().top - headerHeight - 10;

                        $('html, body').animate({
                            scrollTop: scrollToPosition
                        }, 800);

                        $('.navbar a').removeClass('active');
                        $(this).addClass('active');

                         if ($navbar.hasClass('active')) {
                            $menuIcon.removeClass('bx-x');
                            $navbar.removeClass('active');
                         }
                        return false;
                    }
                }
            });

             let scrollTimeout;
             $(window).on('scroll', function() {
                 clearTimeout(scrollTimeout);
                 scrollTimeout = setTimeout(function() {
                     var scrollDistance = $(window).scrollTop();
                     var headerHeight = $('header').outerHeight() || ( $(window).width() <= 991 ? parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-height-mobile')) : parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-height-desktop')) );
                     var threshold = headerHeight + 50;

                     var activeSection = null;

                     $('section[id]').each(function() {
                         var sectionTop = $(this).offset().top - threshold;
                         var sectionBottom = sectionTop + $(this).outerHeight();

                         if (scrollDistance >= sectionTop && scrollDistance < sectionBottom) {
                             activeSection = $(this).attr('id');
                             return false;
                         }
                     });

                      const homeSectionTop = $('#home').length ? $('#home').offset().top - threshold : 0;
                      if (scrollDistance < homeSectionTop + 100) {
                          activeSection = 'home';
                      }

                     const currentActive = $('.navbar a.active');
                     const targetLinkSelector = `.navbar a[href="#${activeSection}"]`;
                     const targetLink = $(targetLinkSelector);

                     if (activeSection && targetLink.length && !targetLink.hasClass('active')) {
                         $('.navbar a').removeClass('active');
                         targetLink.addClass('active');
                     } else if (!activeSection && currentActive.attr('href') !== '#home') {
                          $('.navbar a').removeClass('active');
                          $('.navbar a[href="#home"]').addClass('active');
                     }
                 }, 100);
             });

             $(window).trigger('scroll');

        });
    </script>

</body>
</html>